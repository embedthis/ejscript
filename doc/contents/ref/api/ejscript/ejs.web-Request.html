<!DOCTYPE html>
<html>
<head>
   <title>Class Request</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>Request</h1>
<div class='classBlock'>
<table class='classHead' title='Request'>
   <tr><td><strong>Module</strong></td><td>ejs.web</td></tr>
   <tr><td><strong>Definition</strong></td><td>dynamic  class Request</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>Request <img src='images/inherit.gif' alt='inherit'/> <a href='Object.html'>Object</a><tr><td><strong>Specified</strong></td><td>ejscript-2.5</td></tr>
<tr><td><strong>Stability</strong></td><td>Prototype
8.</td></tr>
       </td></tr>
</table>

<p class='classBrief'>Web request class.</p>

<p class='classDescription'>Request objects manage the state and execution of a web request. The HttpServer class creates
instances of Request in response to incoming client requests. The Request object holds the client request state
including the request URL and headers. It provides low-level properties and methods to inspect and control the
request. The Request object is a Stream and by calling the read() and write() methods, request body 
content can be read and written.<br/><br/>The response to send back to the client can be defined by setting status and calling setHeaders() and write() to 
set the response status, headers and body content respectively.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' title='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='SecurityTokenName'></a>
   <tr><td nowrap align='center'> static const </td><td>SecurityTokenName</td><td>&nbsp;</td><td>Security Token for use to help mitigate CSRF security threats. </td></tr>
<a name='absHome'></a>
   <tr><td nowrap align='center'> </td><td>absHome</td><td><a href='Uri.html'>Uri</a></td><td>Uri for the top-level of the application. This is an absolute Uri that includes scheme and host components.
See <a href='#home'>home</a> to get a relative Uri.</td></tr>
<a name='async'></a>
   <tr><td nowrap align='center'> get set </td><td>async</td><td><a href='Boolean.html'>Boolean</a></td><td>The current async mode.Request does not support sync mode and only supports async mode. Set to true if the stream is in async mode.</td></tr>
<a name='authGroup'></a>
   <tr><td nowrap align='center'> </td><td>authGroup</td><td><a href='String.html'>String</a></td><td>Authentication group. This property is set to the value of the authentication group header. 
This field is read-only.</td></tr>
<a name='authType'></a>
   <tr><td nowrap align='center'> </td><td>authType</td><td><a href='String.html'>String</a></td><td>Authentication method if authorization is being used (basic or digest). Set to null if not using authentication. 
This field is read-only.
0.</td></tr>
<a name='authUser'></a>
   <tr><td nowrap align='center'> </td><td>authUser</td><td><a href='String.html'>String</a></td><td>Authentication user name. This property is set to the value of the authentication user header. Set to null if
not yet defined.
This field is read-only.</td></tr>
<a name='autoFinalizing'></a>
   <tr><td nowrap align='center'> </td><td>autoFinalizing</td><td><a href='Boolean.html'>Boolean</a></td><td>Control whether auto-finalizing will be used for the request. If autoFinalizing is false, a request must
call <a href='#finalize'>finalize()</a> to signal the end of write data. If autoFinalize is true, the Request class will automatically 
call finalize at the conclusion of the request.
Applications that wish to keep the request open to the client can suppress auto-finalization by 
setting autoFinalizing to false or by calling dontAutoFinalize(). This property defaults to true.</td></tr>
<a name='config'></a>
   <tr><td nowrap align='center'> </td><td>config</td><td><a href='Object.html'>Object</a></td><td>Request configuration. Initially refers to <a href='App.html#config'>App.config</a> which is filled with the aggregated "ejsrc" content.
Middleware may modify to refer to a request local configuration object.</td></tr>
<a name='contentLength'></a>
   <tr><td nowrap align='center'> </td><td>contentLength</td><td><a href='Number.html'>Number</a></td><td>Get the request content length. This is the length of body data sent by the client with the request. 
This property is read-only and is set to the length of the request content body in bytes or -1 if not known.
Body data is readable by using <a href='#read'>read()</a> or by using the request object as a stream.</td></tr>
<a name='contentType'></a>
   <tr><td nowrap align='center'> </td><td>contentType</td><td><a href='String.html'>String</a></td><td>The request content type as specified by the "Content-Type" Http request header. This is set to null 
if not defined. This is the content type of the request body content sent with the request.</td></tr>
<a name='controller'></a>
   <tr><td nowrap align='center'> </td><td>controller</td><td><a href='ejs.web-Controller.html'>Controller</a></td><td>Associated Controller object. Set to null if no associated controller.
8.</td></tr>
<a name='cookies'></a>
   <tr><td nowrap align='center'> </td><td>cookies</td><td><a href='Object.html'>Object</a></td><td>Cookie headers. Cookies are sent by the client browser via the Set-Cookie Http header. They are typically 
used used to specify the session state. If sessions are being used, an Ejscript session cookie will be 
sent to and from the browser with each request.</td></tr>
<a name='dir'></a>
   <tr><td nowrap align='center'> </td><td>dir</td><td><a href='Path.html'>Path</a></td><td>Application web document directory on the local file system. This is set to the directory containing the
application. For MVC applications, this is set to the base directory of the application. For non-MVC apps, 
it is set to the document root directory specified when the HttpServer was instantiated.</td></tr>
<a name='env'></a>
   <tr><td nowrap align='center'> </td><td>env</td><td><a href='Object.html'>Object</a></td><td>Storage for middleware specific state. Added for JSGI compliance.</td></tr>
<a name='errorMessage'></a>
   <tr><td nowrap align='center'> </td><td>errorMessage</td><td><a href='String.html'>String</a></td><td>Descriptive error message for the request. This message is defined internally by the Request if a request
times out or has a communications error.
8.</td></tr>
<a name='extension'></a>
   <tr><td nowrap align='center'> get </td><td>extension</td><td><a href='String.html'>String</a></td><td>The request pathInfo file extension. </td></tr>
<a name='filename'></a>
   <tr><td nowrap align='center'> </td><td>filename</td><td><a href='Path.html'>Path</a></td><td>Physical filename for the resource supplying the response content for the request. Virtual requests where
the Request <a href='#uri'>uri</a> does not correspond to any physical resource may not define this property.</td></tr>
<a name='files'></a>
   <tr><td nowrap align='center'> </td><td>files</td><td><a href='Object.html'>Object</a></td><td>Files uploaded as part of the request. For each uploaded file, an instance of UploadFile is created in files. 
Each element is named by the file upload HTML input element ID in the HTML page form.</td></tr>
<a name='finalized'></a>
   <tr><td nowrap align='center'> get </td><td>finalized</td><td><a href='Boolean.html'>Boolean</a></td><td>Has the request output been finalized. </td></tr>
<a name='headers'></a>
   <tr><td nowrap align='center'> </td><td>headers</td><td><a href='Object.html'>Object</a></td><td>Request Http headers. This is an object hash filled with lower-case request headers from the client. If multiple 
headers of the same key value are defined, their contents will be catenated with a ", " separator as per the 
HTTP/1.1 specification. Use the header() method if you want to retrieve a single header.
Headers defined on the server-side by creating new header entries in <a href='#headers'>headers</a> will preserve case. 
Use <a href='#header'>header()</a> if you want to match headers using a mixed case key. e.g. header("Content-Length").</td></tr>
<a name='home'></a>
   <tr><td nowrap align='center'> </td><td>home</td><td><a href='Uri.html'>Uri</a></td><td>Home URI for the application. This is a relative Uri from the current URI to the 
the top-most directory level of the application.</td></tr>
<a name='host'></a>
   <tr><td nowrap align='center'> </td><td>host</td><td><a href='String.html'>String</a></td><td>Host serving the request. This is initialized to the authorized server hostname (HttpServer.name) if one is 
configured.  Otherwise it will use Http "Host" header value if supplied by the client else the server IP 
address of the accepting interface. This algorithm attempts to use the most public address available for 
the server.</td></tr>
<a name='flash'></a>
   <tr><td nowrap align='center'> </td><td>flash</td><td><a href='Object.html'>Object</a></td><td>Notification "flash" messages to pass to the next request (only). By convention, the following keys are used.
error: Negative errors (Warnings and errors), inform: Informational / postitive feedback (note),
warn: Negative feedback (Warnings and errors), *:: Other feedback (reminders, suggestions...).</td></tr>
<a name='isSecure'></a>
   <tr><td nowrap align='center'> </td><td>isSecure</td><td><a href='Boolean.html'>Boolean</a></td><td>Flag indicating if the request is using secure communications. This means that TLS/SSL is the underlying
protocol scheme.</td></tr>
<a name='formData'></a>
   <tr><td nowrap align='center'> </td><td>formData</td><td><a href='String.html'>String</a></td><td>The request form parameters as a string. This parameters are www-url decoded from the POST request body data. 
This is useful to get a stable, sorted string representing the form parameters.</td></tr>
<a name='limits'></a>
   <tr><td nowrap align='center'> </td><td>limits</td><td><a href='Object.html'>Object</a></td><td>Resource limits for the request. The limits have initial default values defined by the owning HttpServer.</td></tr>
<a name='localAddress'></a>
   <tr><td nowrap align='center'> </td><td>localAddress</td><td><a href='String.html'>String</a></td><td>Server IP address of the accepting interface. </td></tr>
<a name='input'></a>
   <tr><td nowrap align='center'> get </td><td>input</td><td><a href='Stream.html'>Stream</a></td><td>Request content stream. This is equivalent to using "this" as Request objects are streams connected to the
input content. Added for JSGI compliance.</td></tr>
<a name='jsgi'></a>
   <tr><td nowrap align='center'> static </td><td>jsgi</td><td><a href='Object.html'>Object</a></td><td>JSGI specification configuration object. </td></tr>
<a name='log'></a>
   <tr><td nowrap align='center'> </td><td>log</td><td><a href='Logger.html'>Logger</a></td><td>Logger object. Set to App.log. This is configured from the "log" section of the "ejsrc" config file.</td></tr>
<a name='method'></a>
   <tr><td nowrap align='center'> </td><td>method</td><td><a href='String.html'>String</a></td><td>Request HTTP method. String containing the Http method (DELETE | GET | POST | PUT | OPTIONS | TRACE).</td></tr>
<a name='originalMethod'></a>
   <tr><td nowrap align='center'> </td><td>originalMethod</td><td><a href='String.html'>String</a></td><td>Original HTTP request method used by the client. If the method is overridden by including a "-ejs-method-" 
parameter in a POST request or by defining an X-HTTP-METHOD-OVERRIDE Http header, the original method used by
the client is stored in this property and the method property reflects the newly defined value. If method is
not overridden, originalMethod will be null.</td></tr>
<a name='originalUri'></a>
   <tr><td nowrap align='center'> </td><td>originalUri</td><td><a href='Uri.html'>Uri</a></td><td>The original request URI supplied by the client. This is the Uri path supplied by the client on the first
line of the Http request. It is combined with the HttpServer scheme, host and port components to yield a 
fully qualified URI. The "uri" property has fields for: scheme, host, port, path, query and reference.
The "uri" property is read-only.
0.</td></tr>
<a name='params'></a>
   <tr><td nowrap align='center'> </td><td>params</td><td><a href='Object.html'>Object</a></td><td>The request form parameters plus other routing parameters. The form parameters are www-url decoded from the POST request body data. See also <a href='#form'>form</a>. </td></tr>
<a name='reference'></a>
   <tr><td nowrap align='center'> </td><td>reference</td><td><a href='String.html'>String</a></td><td>Request reference string. This is the portion of the Uri after the "#". Set to null if there is no reference.</td></tr>
<a name='referrer'></a>
   <tr><td nowrap align='center'> </td><td>referrer</td><td><a href='String.html'>String</a></td><td>Name of the referring URL. This comes from the request "Referrer" Http header. Set to null if there is
no defined referrer. Note: the HTTP header is misspelt as "referer"
0.</td></tr>
<a name='remoteAddress'></a>
   <tr><td nowrap align='center'> </td><td>remoteAddress</td><td><a href='String.html'>String</a></td><td>IP address of the client issuing the request. 8.</td></tr>
<a name='responded'></a>
   <tr><td nowrap align='center'> </td><td>responded</td><td><a href='Boolean.html'>Boolean</a></td><td>The application has responded in some way. The application has commenced a response by doing some 
output or setting status.</td></tr>
<a name='responseHeaders'></a>
   <tr><td nowrap align='center'> </td><td>responseHeaders</td><td><a href='Object.html'>Object</a></td><td>Http response headers. This is the proposed set of headers to send with the response.
The case of header keys is preserved.</td></tr>
<a name='pathInfo'></a>
   <tr><td nowrap align='center'> </td><td>pathInfo</td><td><a href='String.html'>String</a></td><td>Location of the request within the application. This is the portion of the request URL after the scriptName. 
The pathInfo is originally derrived from uri.path after splitting off the scriptName. Changes to the uri or 
scriptName properties will not affect the pathInfo property.</td></tr>
<a name='route'></a>
   <tr><td nowrap align='center'> </td><td>route</td><td><a href='ejs.web-Route.html'>Route</a></td><td>Route used for the request. The route is the matching entry in the route table for the request.
The route has properties two properties of particular interest: "name" which is the name of the route and
and "type" which classifies the type of request.</td></tr>
<a name='scheme'></a>
   <tr><td nowrap align='center'> </td><td>scheme</td><td><a href='String.html'>String</a></td><td>Http request scheme (http | https). </td></tr>
<a name='scriptName'></a>
   <tr><td nowrap align='center'> </td><td>scriptName</td><td><a href='String.html'>String</a></td><td>Script name for the current application serving the request. This is typically the leading Uri portion 
corresponding to the application, but middleware may modify this to be an arbitrary string representing 
the application.  The script name is often determined by the Router as it parses the request using 
the routing tables. The scriptName will be set to the empty string if not defined, otherwise is should begin
with a "/" character. NOTE: changing script name will not update the home property.</td></tr>
<a name='server'></a>
   <tr><td nowrap align='center'> </td><td>server</td><td><a href='ejs.web-HttpServer.html'>HttpServer</a></td><td>Owning server for the request. This is the HttpServer object that created this request.</td></tr>
<a name='port'></a>
   <tr><td nowrap align='center'> </td><td>port</td><td><a href='Number.html'>Number</a></td><td>TCP/IP port number for the server of this request. </td></tr>
<a name='protocol'></a>
   <tr><td nowrap align='center'> </td><td>protocol</td><td><a href='String.html'>String</a></td><td>Http request protocol (HTTP/1.0 | HTTP/1.1). </td></tr>
<a name='query'></a>
   <tr><td nowrap align='center'> </td><td>query</td><td><a href='String.html'>String</a></td><td>Request query string. This is the portion of the Uri after the "?". Set to null if there is no query.</td></tr>
<a name='queryString'></a>
   <tr><td nowrap align='center'> get </td><td>queryString</td><td><a href='String.html'>String</a></td><td>Decoded query string (URL query string). Eqivalent to the <a href='#query'>query</a> property. Added for JSGI compliance.</td></tr>
<a name='securityToken'></a>
   <tr><td nowrap align='center'> get </td><td>securityToken</td><td><a href='Object.html'>Object</a></td><td>Get a security token to help mitigate CSRF threats. The security token is submitted by forms and requests and
can be validated by controllers. The token is stored in session["__ejs-security-token__"].</td></tr>
<a name='serverPort'></a>
   <tr><td nowrap align='center'> get </td><td>serverPort</td><td><a href='Number.html'>Number</a></td><td>Listening port number for the server. </td></tr>
<a name='session'></a>
   <tr><td nowrap align='center'> </td><td>session</td><td><a href='ejs.web-Session.html'>Session</a></td><td>Session state object. The session state object can be used to share state between requests.
If a session has not already been created, accessing this property automatically creates a new session 
and sets the <a href='ejs.web-Request.html#sessionID'>Request.sessionID</a> property and a cookie containing a session ID sent to the client 
with the response.
To test if a session has been created, test the sessionID property which will not auto-create a session.
Objects are stored in the session state using JSON serialization.</td></tr>
<a name='sessionID'></a>
   <tr><td nowrap align='center'> </td><td>sessionID</td><td><a href='String.html'>String</a></td><td>Current session ID. Index into the <a href='#sessions'>sessions</a> object. Set to null if no session is defined.</td></tr>
<a name='status'></a>
   <tr><td nowrap align='center'> </td><td>status</td><td><a href='Number.html'>Number</a></td><td>Set to the (proposed) Http response status code. </td></tr>
<a name='uri'></a>
   <tr><td nowrap align='center'> </td><td>uri</td><td><a href='Uri.html'>Uri</a></td><td>The current request URI. This property is read-only and is dynamically computed from the originalUri combined
with the current scheme, host, port, scriptName, pathInfo, query and reference property values. 
The "uri" property has fields for: scheme, host, port, path, query and reference.</td></tr>
<a name='writeBuffer'></a>
   <tr><td nowrap align='center'> </td><td>writeBuffer</td><td><a href='ByteArray.html'>ByteArray</a></td><td>Write buffer when capturing output. </td></tr>
<a name='written'></a>
   <tr><td nowrap align='center'> get </td><td>written</td><td><a href='Number.html'>Number</a></td><td>The number of bytes written to the client. This is the count of bytes passed to <a href='#write'>write</a> and buffered, 
not the actual number of bytes sent to the network connection.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='ClassMethods'></a>
<h2 class='classSection'>Request Class Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <p>(No own class methods defined)</p></table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<a name='InstanceMethods'></a>
<h2 class='classSection'>Request Instance Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#Request'><b>Request</b></a>(uri: <a href='Uri.html'>Uri</a>, dir: <a href='Path.html'>Path</a> = .)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Construct the a Request object.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#autoFinalize'><b>autoFinalize</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Finalize the request if <a href='#autoFinalizing'>autoFinalizing</a> is true.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#checkSecurityToken'><b>checkSecurityToken</b></a>()</tr><tr class='apiBrief'><td>&nbsp;</td><td>Check the request security token.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#close'><b>close</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Close the stream.This closes the current request by finalizing all transmission data and sending a "close" event.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#createSession'><b>createSession</b></a>(timeout: <a href='Number.html'>Number</a> = -1): <a href='ejs.web-Session.html'>Session</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a session state object.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#destroySession'><b>destroySession</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Destroy a session.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#dontAutoFinalize'><b>dontAutoFinalize</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Stop auto-finalizing the request.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#error'><b>error</b></a>(msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set an error flash notification message.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#finalize'><b>finalize</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Signals the end of any and all response data and flushes any buffered write data to the client.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#finalizeFlash'><b>finalizeFlash</b></a>()</tr><tr class='apiBrief'><td>&nbsp;</td><td>Save flash messages for the next request and delete old flash messages.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#flush'><b>flush</b></a>(dir: <a href='Number.html'>Number</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Flush the stream and underlying streams.Flush request data.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#header'><b>header</b></a>(key: <a href='String.html'>String</a>): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get a request header by keyword.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#inform'><b>inform</b></a>(msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set an informational flash notification message.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#link'><b>link</b></a>(target: <a href='Object.html'>Object</a>): <a href='Uri.html'>Uri</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a URI link.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#matchContent'><b>matchContent</b></a>(formats: <a href='Array.html'>Array</a>): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Select the response content type based on the request "Accept" header.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#notify'><b>notify</b></a>(key: <a href='String.html'>String</a>, msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set a transient flash notification message.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#off'><b>off</b></a>(name, observer: <a href='Function.html'>Function</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove an observer from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#on'><b>on</b></a>(name, observer: <a href='Function.html'>Function</a>): <a href='ejs.web-Request.html'>Request</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add an observer to the stream for the named events.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#read'><b>read</b></a>(buffer: <a href='ByteArray.html'>ByteArray</a>, offset: <a href='Number.html'>Number</a> = 0, count: <a href='Number.html'>Number</a> = -1): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a data from the stream.If the request is posting a form, i.e.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#redirect'><b>redirect</b></a>(target: <a href='Object.html'>Object</a>, status: <a href='Number.html'>Number</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Redirect the client to a new URL.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setCookie'><b>setCookie</b></a>(name: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a>)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Define a cookie header to send with the response.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setHeader'><b>setHeader</b></a>(key: <a href='String.html'>String</a>, value: <a href='String.html'>String</a>, overwrite: <a href='Boolean.html'>Boolean</a> = true): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to set a Http response header in <a href='#responseHeaders'>responseHeaders</a>. </td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setHeaders'><b>setHeaders</b></a>(headers: <a href='Object.html'>Object</a>, overwrite: <a href='Boolean.html'>Boolean</a> = true): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to set multiple Http response headers in <a href='#responseHeaders'>responseHeaders</a>. </td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setLimits'><b>setLimits</b></a>(limits: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Update the request resource limits.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setLocation'><b>setLocation</b></a>(prefix: <a href='String.html'>String</a>, location: <a href='Path.html'>Path</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to define an application at a given Uri prefix and directory location.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setStatus'><b>setStatus</b></a>(status: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to set the (proposed) Http response status code.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setupFlash'><b>setupFlash</b></a>()</tr><tr class='apiBrief'><td>&nbsp;</td><td>Prepare the flash message area.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#trace'><b>trace</b></a>(options: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Configure request tracing for the request.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#warn'><b>warn</b></a>(msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set a warning flash notification.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#write'><b>write</b></a>(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write data to the stream.Write data to the client.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#writeError'><b>writeError</b></a>(status: <a href='Number.html'>Number</a>, msgs: <a href='Array.html'>Array</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write an error message back to the user and finalize the request.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#writeFile'><b>writeFile</b></a>(file: <a href='Path.html'>Path</a>): <a href='Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Send a static file back to the client.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#writeResponse'><b>writeResponse</b></a>(response: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Send a response to the client.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#writeSafe'><b>writeSafe</b></a>(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write safely.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='Request'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  Request(uri: <a href='Uri.html'>Uri</a>, dir: <a href='Path.html'>Path</a> = .)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Construct the a Request object. Request objects are typically created by HttpServers and not constructed
manually.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>uri: <a href='Uri.html'>Uri</a> </td><td>Request URI.</td></tr><tr class='param'><td class='param'>dir: <a href='Path.html'>Path</a> </td><td>Default directory containing web documents. [default: .]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='autoFinalize'></a>
<div class='api'>
<div class='apiSig'>    autoFinalize(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Finalize the request if <a href='#autoFinalizing'>autoFinalizing</a> is true. Finalization signals the end of any write data 
and flushes any buffered write data to the client. This routine is used by frameworks to finalize
requests if required.</dd></dl>
</div>
</div>
<hr />
<a name='checkSecurityToken'></a>
<div class='api'>
<div class='apiSig'>    checkSecurityToken()
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Check the request security token. If a required security token is defined in the session state, the
request must supply the same token with all POST requests. This helps mitigate potential CSRF threats.</dd></dl>
<dl><dt>Throws</dt><dd>
</dd>
</dl></div>
</div>
<hr />
<a name='close'></a>
<div class='api'>
<div class='apiSig'>    close(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Close the stream.This closes the current request by finalizing all transmission data and sending a "close" event. HttpServer
attemps to reuse socket connections so calling close(), may not actually close the socket connection 
if the reuse limit has not been exceeded (see limits).
It is normally not necessary to explicitly call close a request as the web framework will automatically 
close finalized requests when all input data has fully been read. Calling close on an already closed
request is silently ignored.</dd></dl>
<dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>close</td><td>A close event is issued before closing the stream.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='createSession'></a>
<div class='api'>
<div class='apiSig'>    createSession(timeout: <a href='Number.html'>Number</a> = -1): <a href='ejs.web-Session.html'>Session</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Create a session state object. The session state object can be used to share state between requests.
If a session has not already been created, this call will create a new session and initialize the 
<a href='#session'>session</a> property with the new session. It will also set the <a href='#sessionID'>sessionID</a> property and a cookie containing 
a session ID that will be sent to the client with the response. Sessions can also be used/created by simply
accessing the session property.  Objects are stored in the session state using JSON serialization.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>timeout: <a href='Number.html'>Number</a> </td><td>Optional session state timeout in seconds. Set to zero for no timeout. After the timeout has  expired, the session will be deleted. [default: -1]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='destroySession'></a>
<div class='api'>
<div class='apiSig'>    destroySession(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Destroy a session. This call destroys the session state store that is being used for the current client. 
If no session exists, this call has no effect. Sessions are created by reading or writing to the <a href='#session'>session</a> 
property.
0.</dd></dl>
</div>
</div>
<hr />
<a name='dontAutoFinalize'></a>
<div class='api'>
<div class='apiSig'>    dontAutoFinalize(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Stop auto-finalizing the request. This will set <a href='#autoFinalizing'>autoFinalizing</a> to false. Some web frameworks will 
"auto-finalize" requests by calling finalize() automatically at the conclusion of the request. 
Applications that wish to keep the connection open to the client can defeat this auto-finalization by 
calling dontAutoFinalize().</dd></dl>
</div>
</div>
<hr />
<a name='error'></a>
<div class='api'>
<div class='apiSig'>    error(msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Set an error flash notification message. Flash messages persist for only one request and are a convenient way to pass state information or 
feedback messages to the next request. To use flash messages, setupFlash() and finalizeFlash() must 
be called before and after the request is processed. HttpServer.process will call setupFlash and finalizeFlash 
automatically.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>msg: <a href='String.html'>String</a> </td><td>Message to store.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='finalize'></a>
<div class='api'>
<div class='apiSig'>    finalize(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Signals the end of any and all response data and flushes any buffered write data to the client. If the request has already been finalized, this call has no additional effect.</dd></dl>
</div>
</div>
<hr />
<a name='finalizeFlash'></a>
<div class='api'>
<div class='apiSig'>    finalizeFlash()
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Save flash messages for the next request and delete old flash messages. (.</dd></dl>
</div>
</div>
<hr />
<a name='flush'></a>
<div class='api'>
<div class='apiSig'>    flush(dir: <a href='Number.html'>Number</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Flush the stream and underlying streams.Flush request data. A supplied flush <a href='#direction'>direction</a> argument modifies the effect of this call.
If direction is set to Stream.READ, then all read data is discarded. If direction is set to Stream.WRITE, 
any buffered data is written. Stream.BOTH will cause both directions to be flushed. If the stream is in 
sync mode, this call will block until all data is written. If the stream is in async mode, it will attempt 
to write all data but will return immediately. Defaults to Stream.WRITE.Calling flush(Sream.WRITE) or finalize() is required to ensure buffered write data is sent 
to the client. Flushing the read direction is ignored.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>dir: <a href='Number.html'>Number</a> </td><td>Direction to flush. Set to <a href='#READ'>READ</a> <a href='#WRITE'>WRITE</a> or <a href='#BOTH'>BOTH</a>. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='header'></a>
<div class='api'>
<div class='apiSig'>    header(key: <a href='String.html'>String</a>): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Get a request header by keyword. Headers supplied by the remote client are stored in lower-case. 
Headers defined on the server-side preserve case. This routine supports both by doing a case-insensitive lookup.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>Header key value to retrieve. The key match is case insensitive.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The header value.</dd></dl>
</div>
</div>
<hr />
<a name='inform'></a>
<div class='api'>
<div class='apiSig'>    inform(msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Set an informational flash notification message. Flash messages persist for only one request and are a convenient way to pass state information or 
feedback messages to the next request. To use flash messages, setupFlash() and finalizeFlash() must 
be called before and after the request is processed. HttpServer.process will call setupFlash and finalizeFlash 
automatically.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>msg: <a href='String.html'>String</a> </td><td>Message to store.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='link'></a>
<div class='api'>
<div class='apiSig'>    link(target: <a href='Object.html'>Object</a>): <a href='Uri.html'>Uri</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Create a URI link. The target parameter may contain partial or complete URI information. The missing parts 
are supplied using the current request and route tables. The resulting URI is a normalized, server-local 
URI (begins with "/"). The URI will include any defined scriptName, but will not include scheme, host or 
port components.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>target: <a href='Object.html'>Object</a> </td><td>The URI target. The target parameter can be a URI string or object hash of components. If the  target is a string, it is may contain an absolute or relative URI. If the target has an absolute URI path,  that path is used unmodified. If the target is a relative URI, it is appended to the current request URI  path.  The target can also be an object hash of URI components: scheme, host, port, path, reference and query. If these component properties are supplied, these will be combined to create a URI.  The URI will be created according to the route URI template. The template may be explicitly specified via a "route" target property. Otherwise, if an "action" property is specified, the route of the same name will be used. If these don't result in a usable route, the "default" route will be used. See the Router for more details.  If the target is a string that begins with " @" it will be interpreted as a controller/action pair of the  form " @Controller/action". If the "controller/" portion is absent, the current controller is used. If  the action component is missing, the "index" action is used. A bare " @" refers to the "index" action  of the current controller.  Lastly, the target object hash may contain an override "uri" property. If specified, the value of the  "uri" property will be returned and all other properties will be ignored.</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>scheme</td><td>String URI scheme portion.</td></tr>
<td class='param'>host</td><td>String URI host portion.</td></tr>
<td class='param'>port</td><td>Number URI port number.</td></tr>
<td class='param'>path</td><td>String URI path portion.</td></tr>
<td class='param'>reference</td><td>String URI path reference. Does not include "#".</td></tr>
<td class='param'>query</td><td>String URI query parameters. Does not include "?".</td></tr>
<td class='param'>controller</td><td>String Controller name if using a Controller-based route. This can also be specified via the action option.</td></tr>
<td class='param'>action</td><td>String Action to invoke. This can be a URI string or a Controller action of the form.</td></tr>
<td class='param'>route</td><td>String Route name to use for the URI template.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>A normalized, server-local Uri object. The returned URI will be an absolute URI.</dd></dl>
<dl><dt>Example</dt>
<dd><pre>Given a current request of http://example.com/samples/demo" and "r" == the current request:

r.link("images/splash.png")                  # "/samples/images/splash.png"
r.link("images/splash.png").complete(r.uri)  # "http://example.com/samples/images/splash.png"
r.link("images/splash.png").relative(r.uri)  # "images/splash.png"

r.link("http://example.com/index.html")
r.link("/path/to/index.html")
r.link("\@Controller/checkout")
r.link("\@Controller/")
r.link("\@checkout")
r.link("\@")
r.link({action: "checkout")
r.link({action: "logout", controller: "Admin")
r.link({action: "Admin/logout")
r.link({action: "\@Admin/logout")
r.link({uri: "http://example.com/checkout"})
r.link({route: "default", action: "\@checkout")
r.link({product: "candy", quantity: "10", template: "/cart/{product}/{quantity}}")</pre></dd></dl>
</div>
</div>
<hr />
<a name='matchContent'></a>
<div class='api'>
<div class='apiSig'>    matchContent(formats: <a href='Array.html'>Array</a>): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Select the response content type based on the request "Accept" header. See RFC-2616.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>formats: <a href='Array.html'>Array</a> </td><td>Array of server supported mime types.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>Formats The selected mime types mime type string  Accept: "application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png".</dd></dl>
</div>
</div>
<hr />
<a name='notify'></a>
<div class='api'>
<div class='apiSig'>    notify(key: <a href='String.html'>String</a>, msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Set a transient flash notification message. Flash messages persist for only one request and are a convenient
way to pass state information or feedback messages to the next request. To use flash messages, 
setupFlash() and finalizeFlash() must be called before and after the request is processed. HttpServer.process
will call setupFlash and finalizeFlash automatically.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>Flash message key.</td></tr><tr class='param'><td class='param'>msg: <a href='String.html'>String</a> </td><td>Message to store.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='off'></a>
<div class='api'>
<div class='apiSig'>    off(name, observer: <a href='Function.html'>Function</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Remove an observer from the stream. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name </td><td>Event name previously used with observe. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='Function.html'>Function</a> </td><td>Observer function previously used with observe.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='on'></a>
<div class='api'>
<div class='apiSig'>    on(name, observer: <a href='Function.html'>Function</a>): <a href='ejs.web-Request.html'>Request</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Add an observer to the stream for the named events. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: [String|Array]</td><td>Name of the event to listen for. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='Function.html'>Function</a> </td><td>Callback observer function. The function is called with the following signature: function observer(event: String, ...args): Void.</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>readable</td><td>Issued when the stream becomes readable.</td></tr>
<td class='param'>writable</td><td>Issued when the stream becomes writable.</td></tr>
<td class='param'>close</td><td>Issued when stream is being closed. 8.</td></tr>
<td class='param'>writable</td><td>Issued when the connection is writable to accept body data (PUT, POST).</td></tr>
<td class='param'>close</td><td>Issued when the request completes.</td></tr>
<td class='param'>error</td><td>Issued if the request does not complete or the connection disconnects. An error event is not  caused by non-200 status codes, these are regarded as valid return results. Rather, an error event will be issued when the request cannot return a complete, valid Http response to the client. All events are called with the signature: function (event: String, http: Http): Void.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='read'></a>
<div class='api'>
<div class='apiSig'>    read(buffer: <a href='ByteArray.html'>ByteArray</a>, offset: <a href='Number.html'>Number</a> = 0, count: <a href='Number.html'>Number</a> = -1): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Read a data from the stream.If the request is posting a form, i.e. If data is available, the call will return immediately. 
If no data is available and the stream is in sync mode, the call will block until data is available.
If no data is available and the stream is in async mode, the call will not block and will return immediately.
In this case a "readable" event will be issued when data is available for reading.the Http ContentType header is set to 
"application/x-www-form-urlencoded", then the request object will not be created by the HttpServer until
all the form data is read and the <a href='#params'>params</a> collection created and populated with the form data. This permits form
data to be processed synchronously without having to use async/observer techniques to respond to readable
events. With all other content types, the Request object will be created and run before the incoming client 
data has been read. To read data in these situations, register an observer function to run when the
connection becomes "readable".</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>buffer: <a href='ByteArray.html'>ByteArray</a> </td><td>Destination byte array for read data.</td></tr><tr class='param'><td class='param'>offset: <a href='Number.html'>Number</a> </td><td>Offset in the byte array to place the data. If the offset is -1, then data is appended to the buffer write <a href='#position'>position</a> which is then updated. If offset is >= 0, the data is read  to the offset and the read pointer is set to the offset and the write pointer to one past the end of  the data just read. [default: 0]</td></tr><tr class='param'><td class='param'>count: <a href='Number.html'>Number</a> </td><td>Read up to this number of bytes. If -1, read as much as the buffer will hold up. If the  stream is of fixed and known length (such as a file) and the buffer is of sufficient size or is growable,  read the entire stream. If the buffer is of a fixed size, ready only what will fit into the buffer. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>readable</td><td>Issued when there is new read data available.</td></tr>
<td class='param'>writable</td><td>Issued when the stream becomes empty. `.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>A count of the bytes actually read. Returns null on EOF or errors.</dd></dl>
<dl><dt>Example</dt>
<dd><pre>request.on("readable", function(event, request) {
    var data = new byteArray
    if (read(data)) {
        print("Got " + data)
    } else {
        //  End of input, call finalize() when all output has been written
        request.finalize()
    }
})</pre></dd></dl>
</div>
</div>
<hr />
<a name='redirect'></a>
<div class='api'>
<div class='apiSig'>    redirect(target: <a href='Object.html'>Object</a>, status: <a href='Number.html'>Number</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Redirect the client to a new URL. This call redirects the client's browser to a new target specified 
by the url.  Optionally, a redirection code may be provided. Normally this code is set to be the HTTP 
code 302 which means a temporary redirect. A 301, permanent redirect code may be explicitly set.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>target: <a href='Object.html'>Object</a> </td><td>Uri to redirect the client toward. This can be a relative or absolute string URI or it can be a hash of URI components. For example, the following are valid inputs: ../index.ejs,  http://www.example.com/home.html,  @list.</td></tr><tr class='param'><td class='param'>status: <a href='Number.html'>Number</a> </td><td>Optional HTTP redirection status. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setCookie'></a>
<div class='api'>
<div class='apiSig'>    setCookie(name: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a>)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Define a cookie header to send with the response. The Path, domain and expires properties can be set to null for 
default values.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Cookie name.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Cookie field options.</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>value</td><td>Cookie value.</td></tr>
<td class='param'>path</td><td>Uri path to which the cookie applies.</td></tr>
<td class='param'>domain</td><td>String Domain in which the cookie applies. Must have 2-3 "." and begin with a leading ".".  For example: domain: .example.com.</td></tr>
<td class='param'>expires</td><td>Date When the cookie expires.</td></tr>
<td class='param'>secure</td><td>Boolean Set to true if the cookie only applies for SSL based connections.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='setHeader'></a>
<div class='api'>
<div class='apiSig'>    setHeader(key: <a href='String.html'>String</a>, value: <a href='String.html'>String</a>, overwrite: <a href='Boolean.html'>Boolean</a> = true): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to set a Http response header in <a href='#responseHeaders'>responseHeaders</a>.  If a header has already been 
defined and <a href='#overwrite'>overwrite</a> is true, the header will be overwritten. NOTE: case is ignored in the header keyword.
Access <a href='#responseHeaders'>responseHeaders</a> to inspect the proposed response header set.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>The header keyword for the request, e.g. "accept".</td></tr><tr class='param'><td class='param'>value: <a href='String.html'>String</a> </td><td>The value to associate with the header, e.g. "yes".</td></tr><tr class='param'><td class='param'>overwrite: <a href='Boolean.html'>Boolean</a> </td><td>If the header is already defined and overwrite is true, then the new value will overwrite the old. If overwrite is false, the new value will be catenated to the old value with a ", " separator. [default: true]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setHeaders'></a>
<div class='api'>
<div class='apiSig'>    setHeaders(headers: <a href='Object.html'>Object</a>, overwrite: <a href='Boolean.html'>Boolean</a> = true): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to set multiple Http response headers in <a href='#responseHeaders'>responseHeaders</a>.  Access <a href='#responseHeaders'>responseHeaders</a> to 
inspect the proposed response header set.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>headers: <a href='Object.html'>Object</a> </td><td>Set of headers to use.</td></tr><tr class='param'><td class='param'>overwrite: <a href='Boolean.html'>Boolean</a> </td><td>If the header is already defined and overwrite is true, then the new value will overwrite the old. If overwrite is false, the new value will be catenated to the old value with a ", " separator. [default: true]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setLimits'></a>
<div class='api'>
<div class='apiSig'>    setLimits(limits: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Update the request resource limits. The supplied limit fields are updated.
See the <a href='#limits'>limits</a> property for limit field details.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>limits: <a href='Object.html'>Object</a> </td><td>Object hash of limit fields and values.</td></tr></table></dd>
</dl><dl><dt>See Also</dt>
<dd>
<a href='limits.html'>limits</a>
</dd></dl>
</div>
</div>
<hr />
<a name='setLocation'></a>
<div class='api'>
<div class='apiSig'>    setLocation(prefix: <a href='String.html'>String</a>, location: <a href='Path.html'>Path</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to define an application at a given Uri prefix and directory location. This is typically
called from routing tables. This sets the <a href='#pathInfo'>pathInfo</a> <a href='#scriptName'>scriptName</a> and <a href='#dir'>dir</a> properties.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>prefix: <a href='String.html'>String</a> </td><td>The leading Uri prefix for the application. This prefix is removed from the pathInfo and the <a href='#scriptName'>scriptName</a> property is set to the prefix. The script name should begin with "/".</td></tr><tr class='param'><td class='param'>location: <a href='Path.html'>Path</a> </td><td>Path to where the application home directory is. This sets the <a href='#dir'>dir</a> property to the <a href='#location'>location</a> argument.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setStatus'></a>
<div class='api'>
<div class='apiSig'>    setStatus(status: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to set the (proposed) Http response status code. This is equivalent to assigning 
to the <a href='#status'>status</a> property.</dd></dl>
</div>
</div>
<hr />
<a name='setupFlash'></a>
<div class='api'>
<div class='apiSig'>    setupFlash()
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Prepare the flash message area. This copies flash messages from the session state store into the flash store.</dd></dl>
</div>
</div>
<hr />
<a name='trace'></a>
<div class='api'>
<div class='apiSig'>    trace(options: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Configure request tracing for the request. The default is to trace the first line of requests and responses at
level 2 and to trace headers at level 3. The options argument contains optional properties.
These may contain an object hash which describes the following fields:.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Set of trace options with properties for: The connection property specifies that new connections should be traced. The error property specifies that new connections should be traced. The info property specifies that new connections should be traced. The rxFirst property specifies that the first line of the request should be traced. The rxHeaders property specifies that the headers (including first line) of the request should be traced. The rxBody property specifies that the body content of the request should be traced. The txFirst property specifies that the first line of the response should be traced. The txHeaders property specifies that the headers (including first line) of the response should be traced. The txBody property specifies that the body content of the request should be traced. The complete property specifies that the body content of the request should be traced. The size property specifies a maximum body size in bytes that will be traced. Content beyond this limit will not be traced.</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>trace({
    "rxHeaders": 3, "rxBody": 4, size: 1000000 
})</pre></dd></dl>
</div>
</div>
<hr />
<a name='warn'></a>
<div class='api'>
<div class='apiSig'>    warn(msg: <a href='String.html'>String</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Set a warning flash notification. Flash messages persist for only one request and are a convenient way to pass state information or 
feedback messages to the next request. To use flash messages, setupFlash() and finalizeFlash() must 
be called before and after the request is processed. HttpServer.process will call setupFlash and finalizeFlash 
automatically.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>msg: <a href='String.html'>String</a> </td><td>Message to store.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='write'></a>
<div class='api'>
<div class='apiSig'>    write(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Write data to the stream.Write data to the client. If the stream can accept all the write data, the call returns immediately with the number of bytes written. 
If writing more data than the stream can absorb in sync mode, the call will block until the data is written.
If writing more data than the stream can absorb in async mode, the call will not block and will buffer the
data and return immediately. Some streams will require a <a href='#flush'>flush()</a> call to actually send the data.
A "writable" event will be issued when the stream can again absorb more data.This will buffer the written data until either flush() or finalize() is called. 
0</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data: <a href='Array.html'>Array</a> </td><td>Data to write.</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>readable</td><td>Issued when data is written and a consumer can read without blocking.</td></tr>
<td class='param'>writable</td><td>Issued when the stream becomes empty and it is ready to be written to.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>A count of the bytes actually written.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if there is an I/O error.
</dd>
</dl></div>
</div>
<hr />
<a name='writeError'></a>
<div class='api'>
<div class='apiSig'>    writeError(status: <a href='Number.html'>Number</a>, msgs: <a href='Array.html'>Array</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Write an error message back to the user and finalize the request. The output is Html escaped for security.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>status: <a href='Number.html'>Number</a> </td><td>Http status code.</td></tr><tr class='param'><td class='param'>msgs: <a href='Array.html'>Array</a> </td><td>Messages to send with the response. The messages may be modified for readability if it  contains an exception backtrace.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='writeFile'></a>
<div class='api'>
<div class='apiSig'>    writeFile(file: <a href='Path.html'>Path</a>): <a href='Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Send a static file back to the client. This is a high performance way to send static content to the client
by using the "sendConnector". To be effective, this call must be invoked prior to sending any data or 
headers to the client, otherwise it will be ignored and the slower "netConnector" will be used instead.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>file: <a href='Path.html'>Path</a> </td><td>Path to the file to send back to the client.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>True if the Send connector can successfully be used.  8.</dd></dl>
</div>
</div>
<hr />
<a name='writeResponse'></a>
<div class='api'>
<div class='apiSig'>    writeResponse(response: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Send a response to the client. This can be used instead of setting status and calling setHeaders() and write(). 
The <a href='#response'>response</a> argument is an object hash containing status, headers and
body properties. The respond method replaces previously defined status and headers.</dd></dl>
<dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>status</td><td>Numeric Http status code (e.g. 200 for a successful response).</td></tr>
<td class='param'>header</td><td>Object hash of Http headers.</td></tr>
<td class='param'>body</td><td>Body content.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='writeSafe'></a>
<div class='api'>
<div class='apiSig'>    writeSafe(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Write safely. Write HTML escaped data back to the client.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data: <a href='Array.html'>Array</a> </td><td>Objects to HTML encode and write back to the client. 0.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="https://www.embedthis.com/">       Embedthis Software LLC, 2003-2014. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
