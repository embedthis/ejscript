<!DOCTYPE html>
<html>
<head>
   <title>Class HttpServer</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>HttpServer</h1>
<div class='classBlock'>
<table class='classHead' title='HttpServer'>
   <tr><td><strong>Module</strong></td><td>ejs.web</td></tr>
   <tr><td><strong>Definition</strong></td><td>dynamic  class HttpServer</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>HttpServer <img src='images/inherit.gif' alt='inherit'/> <a href='Object.html'>Object</a><tr><td><strong>Specified</strong></td><td>ejscript-2.5</td></tr>
<tr><td><strong>Stability</strong></td><td>Evolving.</td></tr>
       </td></tr>
</table>

<p class='classBrief'>HttpServer objects represents the server-side of Hypertext Transfer Protocol (HTTP) version 1.1 connections.</p>

<p class='classDescription'>The HttpServer class is used to receive HTTP requests and generate responses. It supports the HTTP/1.1 standard
including methods for GET, POST, PUT, DELETE, OPTIONS, and TRACE. It also supports Keep-Alive and SSL connections.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' title='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='PrunePeriod'></a>
   <tr><td nowrap align='center'> static </td><td>PrunePeriod</td><td>&nbsp;</td><td>Frequency to check and release excess worker threads 0. </td></tr>
<a name='address'></a>
   <tr><td nowrap align='center'> get </td><td>address</td><td><a href='String.html'>String</a></td><td>Get the local IP address bound to this socket. </td></tr>
<a name='async'></a>
   <tr><td nowrap align='center'> get set </td><td>async</td><td><a href='Boolean.html'>Boolean</a></td><td>The current async mode.If the server is put into sync mode, it must be done before calling listen. Set to true if the stream is in async mode.</td></tr>
<a name='config'></a>
   <tr><td nowrap align='center'> </td><td>config</td><td><a href='Object.html'>Object</a></td><td>Server configuration. Initially refers to App.config which is filled with the aggregated "ejsrc" content.
If a "ejsrc" configuration file exists, it is loaded once at startup and is blended (overwrites) existing 
App.config settings.</td></tr>
<a name='documents'></a>
   <tr><td nowrap align='center'> </td><td>documents</td><td><a href='Path.html'>Path</a></td><td>Default local directory for web documents to serve. This is used as the default Request.dir value.</td></tr>
<a name='home'></a>
   <tr><td nowrap align='center'> </td><td>home</td><td><a href='Path.html'>Path</a></td><td>Default root directory for the server. The app does not change its current directory to this path.</td></tr>
<a name='hosted'></a>
   <tr><td nowrap align='center'> get set </td><td>hosted</td><td><a href='Boolean.html'>Boolean</a></td><td>Flag indicating if the server is running hosted inside a web server. </td></tr>
<a name='indicies'></a>
   <tr><td nowrap align='center'> static </td><td>indicies</td><td><a href='Array.html'>Array</a></td><td>Index files list. Index files are used by various handlers when requests to directories are made. The 
indicies are tried in turn for the first valid index file.</td></tr>
<a name='isSecure'></a>
   <tr><td nowrap align='center'> get </td><td>isSecure</td><td><a href='Boolean.html'>Boolean</a></td><td>Flag indicating if the server is using secure communications. This means that TLS/SSL is the underlying
protocol scheme.</td></tr>
<a name='limits'></a>
   <tr><td nowrap align='center'> get </td><td>limits</td><td><a href='Object.html'>Object</a></td><td>Resource limits for the server and for initial resource limits for requests. </td></tr>
<a name='name'></a>
   <tr><td nowrap align='center'> get set </td><td>name</td><td><a href='String.html'>String</a></td><td>The authorized public host name for the server. If defined, this name will be used in preference for 
request redirections. If no name is defined, redirections will use to the listening IP address by default.</td></tr>
<a name='options'></a>
   <tr><td nowrap align='center'> </td><td>options</td><td><a href='Boolean.html'>Boolean</a></td><td>HttpServer constructor options. </td></tr>
<a name='onrequest'></a>
   <tr><td nowrap align='center'> </td><td>onrequest</td><td>&nbsp;</td><td>Function to invoke inside a worker when serving a threaded request. The function is invoked with the signature:
function onrequest(request: Request): Void.</td></tr>
<a name='port'></a>
   <tr><td nowrap align='center'> get </td><td>port</td><td><a href='Number.html'>Number</a></td><td>Get the port bound to this Http endpoint. </td></tr>
<a name='software'></a>
   <tr><td nowrap align='center'> get </td><td>software</td><td><a href='String.html'>String</a></td><td>Software description for the web server. </td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='ClassMethods'></a>
<h2 class='classSection'>HttpServer Class Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'> static </td><td><a href='#create'><b>create</b></a>(address: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to create a web server.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<a name='InstanceMethods'></a>
<h2 class='classSection'>HttpServer Instance Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#HttpServer'><b>HttpServer</b></a>(options: <a href='Object.html'>Object</a> = expression)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a HttpServer object.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#accept'><b>accept</b></a>(): <a href='ejs.web-Request.html'>Request</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Accept a new incoming for sync servers.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#close'><b>close</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Close the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#listen'><b>listen</b></a>(endpoint: <a href='String.html'>String</a> = null): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Listen for client connections.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#off'><b>off</b></a>(name: <a href='Object.html'>Object</a>, observer: <a href='Function.html'>Function</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove an observer from the server.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#on'><b>on</b></a>(name, observer: <a href='Function.html'>Function</a>): <a href='ejs.web-HttpServer.html'>HttpServer</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add an observer for server events.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#passRequest'><b>passRequest</b></a>(request: <a href='ejs.web-Request.html'>Request</a>, worker: <a href='Worker.html'>Worker</a>)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Pass a request into a worker VM.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#process'><b>process</b></a>(app: <a href='Function.html'>Function</a>, request: <a href='ejs.web-Request.html'>Request</a>, finalize: <a href='Boolean.html'>Boolean</a> = true): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Process a web request.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#pruneWorkers'><b>pruneWorkers</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Prune idle worker threads.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#run'><b>run</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Run the application event loop to service requests.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#secure'><b>secure</b></a>(keyFile: <a href='Path.html'>Path</a>, certFile: <a href='Path.html'>Path</a>, protocols: <a href='Array.html'>Array</a> = null, ciphers: <a href='Array.html'>Array</a> = null): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Define the Secure Sockets Layer (SSL) protocol credentials.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#serve'><b>serve</b></a>(request: <a href='ejs.web-Request.html'>Request</a>, router: <a href='ejs.web-Router.html'>Router</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Serve a web request.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setLimits'><b>setLimits</b></a>(limits: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Update the server resource limits.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setPipeline'><b>setPipeline</b></a>(incoming: <a href='Array.html'>Array</a>, outgoing: <a href='Array.html'>Array</a>, connector: <a href='String.html'>String</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Define the stages of the Http processing pipeline.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setWorkerImage'><b>setWorkerImage</b></a>(worker: <a href='Worker.html'>Worker</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Define a worker that will serve as the base for cloning workers to serve web requests.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#trace'><b>trace</b></a>(options: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Configure request tracing for the server.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#verifyClients'><b>verifyClients</b></a>(caCertPath: <a href='Path.html'>Path</a>, caCertFile: <a href='Path.html'>Path</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Verify client certificates.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='HttpServer'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  HttpServer(options: <a href='Object.html'>Object</a> = expression)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Create a HttpServer object. The server is set to async mode by default.
If an "ejsrc" file exists in the server root, it will be loaded.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Set of options to configure the server. [default: expression]</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>null [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>documents</td><td>Directory containing web documents to serve. If unset and the HttpServer is hosted, the <a href='#documents'>documents</a> property will be defined by the web server.</td></tr>
<td class='param'>home</td><td>Base directory for the server and the "ejsrc" configuration file. If unset and the HttpServer is  hosted, the <a href='#home'>home</a> property will be defined by the web server.</td></tr>
<td class='param'>ejsrc</td><td>Alternate path to the "ejsrc" configuration file.</td></tr>
<td class='param'>config</td><td>Alternate App.config settings.</td></tr>
<td class='param'>unhosted</td><td>If hosted inside a web server, set to true to bypass any web server listening endpoints and  create a new stand-alone (unhosted) listening connection.</td></tr>
</table></dd>
</dl><dl><dt>Specified</dt>
<dd>ejscript-2.5</dd></dl>
<dl><dt>Stability</dt>
<dd>Prototype.</dd></dl>
<dl><dt>Example</dt>
<dd><pre>let server: HttpServer = new HttpServer({documents: "web"})
let router = Router(Router.Restful)
server.on("readable", function (event: String, request: Request) {
    // "this" object is also set to request
    request.status = 200
    request.setHeaders({"Content-Type": "text/plain"})
    request.on("readable", function (event, request) {
        let data = new ByteArray
        if (request.read(data) == null) {
            print("EOF")
        }
    })
    request.on("writable", function (event) {
        request.write("Hello World")
        request.finalize()
    })
}
server.listen("127.0.0.1:7777")</pre></dd></dl>
</div>
</div>
<hr />
<a name='accept'></a>
<div class='api'>
<div class='apiSig'>    accept(): <a href='ejs.web-Request.html'>Request</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Accept a new incoming for sync servers. This call creates a request object in response to an 
incoming client connection on the current HttpServer object.  In async mode, the accept() call is not needed
as the HttpServer automatically creates the Request object and passes it on "readable" events.</dd></dl>
<dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>Issues</td><td>A "accept" event when there is a new connection available.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>A Request object if in sync mode. No return value if in async mode.</dd></dl>
<dl><dt>Example</dt>
<dd><pre>server = new HttpServer
server.listen("8080")
while (request = server.accept()) {
    server.serve(request)
}</pre></dd></dl>
</div>
</div>
<hr />
<a name='close'></a>
<div class='api'>
<div class='apiSig'>    close(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Close the stream. </dd></dl>
<dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>close</td><td>A close event is issued before closing the stream.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='create'></a>
<div class='api'>
<div class='apiSig'>static     create(address: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to create a web server. This will start a routing web server that will serve a 
variety of content using the given specified route tables.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>address: <a href='String.html'>String</a> </td><td>The IP endpoint address on which to listen. The address may be a port number or a composite  "IP:PORT" string. If only a port number is provided, the socket will listen on all interfaces on that port.  If null is provided for an endpoint value, an existing web server listening connection will be used. In this case, the web server will typically be the virtual host that specifies the EjsStartup script. See the hosting web server documentation for specifics.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Set of options to configure the server. [default: expression]</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>null [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>documents</td><td>Directory containing web documents to serve. If unset and the HttpServer is hosted, the <a href='#documents'>documents</a> property will be defined by the web server.</td></tr>
<td class='param'>home</td><td>Base directory for the server and the "ejsrc" configuration file. If unset and the HttpServer is  hosted, the <a href='#home'>home</a> property will be defined by the web server.</td></tr>
<td class='param'>routes</td><td>Route table to use. Defaults to Router.Top.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='listen'></a>
<div class='api'>
<div class='apiSig'>    listen(endpoint: <a href='String.html'>String</a> = null): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Listen for client connections. This creates a HTTP server listening on a single socket endpoint. It can
also be used to attach to an existing listening connection if embedded in a web server. <br/><br/>When hosted inside a web server, the web server will define the listening endpoints and ensure the 
EjsScript startup script is executed. Then, when listen() is called, the HttpServer object will be bound to
the actual web server's listening connection. In this case, the endpoint argument is not required and 
is ignored.<br/><br/>HttpServer supports both sync and async modes of operation.  In sync mode, after listen call is made, 
<a href='#accept'>accept</a> must be called to wait for and receive client connections. The <a href='#accept'>accept</a> call will create the 
Request object.  In async mode, Request objects will be created automatically and passed to registered 
observers via "readable" events.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>endpoint: <a href='String.html'>String</a> </td><td>The endpoint address on which to listen. An endoint may be a port number or a composite  "IP:PORT" string. If only a port number is provided, the socket will listen on all interfaces on that port.  The IP portion may also be "*"" to indicate all interfaces. If the server is hosted in a web server, an appropriate existing web server listening connection will be  used. Otherwise, if not hosted, a server socket will be opened on the endpoint. If hosted and an endpoint is not provided, the server will listen on all appropriate web server connections. [default: null]</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>Issues</td><td>A "accept" event when there is a new connection available.</td></tr>
</table></dd>
</dl><dl><dt>Throws</dt><dd>
<a href='ArgError.html'>ArgError</a>: if the specified endpoint address is not valid or available for binding.
</dd>
</dl><dl><dt>Example</dt>
<dd><pre>server = new Http({home: ".", documents: "web"})
server.on("readable", function (event, request) {
    //  NOTE: "this" is set to the request
    server.serve(request)
})
server.listen("80")</pre></dd></dl>
</div>
</div>
<hr />
<a name='off'></a>
<div class='api'>
<div class='apiSig'>    off(name: <a href='Object.html'>Object</a>, observer: <a href='Function.html'>Function</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Remove an observer from the server. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='Object.html'>Object</a> </td><td>Event name previously used with observe. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='Function.html'>Function</a> </td><td>Observer function previously used with observe.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='on'></a>
<div class='api'>
<div class='apiSig'>    on(name, observer: <a href='Function.html'>Function</a>): <a href='ejs.web-HttpServer.html'>HttpServer</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Add an observer for server events. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name </td><td>Name of the event to listen for. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='Function.html'>Function</a> </td><td>Callback listening function. The function is called with the following signature: function on(event: String, ...args): Void.</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>readable</td><td>Issued when there is a new request available. This readable event will explicitly set the value of "this" to the request regardless of whether the function has a bound "this" value.</td></tr>
<td class='param'>close</td><td>Issued when server is being closed.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='passRequest'></a>
<div class='api'>
<div class='apiSig'>    passRequest(request: <a href='ejs.web-Request.html'>Request</a>, worker: <a href='Worker.html'>Worker</a>)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Pass a request into a worker VM. The onrequest callback receives the request. This routine clones stub 
Request and HttpServer objects into the worker VM.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>request: <a href='ejs.web-Request.html'>Request</a> </td><td>Request object.</td></tr><tr class='param'><td class='param'>worker: <a href='Worker.html'>Worker</a> </td><td>Worker to handle the request H.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='process'></a>
<div class='api'>
<div class='apiSig'>    process(app: <a href='Function.html'>Function</a>, request: <a href='ejs.web-Request.html'>Request</a>, finalize: <a href='Boolean.html'>Boolean</a> = true): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Process a web request. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>request: <a href='ejs.web-Request.html'>Request</a> </td><td>Request object.</td></tr><tr class='param'><td class='param'>app: <a href='Function.html'>Function</a> </td><td>Web application function.</td></tr><tr class='param'><td class='param'>finalize: <a href='Boolean.html'>Boolean</a> </td><td>null [default: true]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='pruneWorkers'></a>
<div class='api'>
<div class='apiSig'>    pruneWorkers(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Prune idle worker threads. This will release cached worker interpreters and reduce memory footprint. 
After calling, the next request will be a little slower as it will need to recreate a worker interpreter.
This is normally run every PrunePeriod. It may be also be called manually at any time.
(.</dd></dl>
</div>
</div>
<hr />
<a name='run'></a>
<div class='api'>
<div class='apiSig'>    run(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Run the application event loop to service requests. If the HttpServer is hosted in a web server, this call does nothing as the web server will service events and
will return immediately.</dd></dl>
</div>
</div>
<hr />
<a name='secure'></a>
<div class='api'>
<div class='apiSig'>    secure(keyFile: <a href='Path.html'>Path</a>, certFile: <a href='Path.html'>Path</a>, protocols: <a href='Array.html'>Array</a> = null, ciphers: <a href='Array.html'>Array</a> = null): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Define the Secure Sockets Layer (SSL) protocol credentials. This must be done before calling <a href='#listen'>listen</a>. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>keyFile: <a href='Path.html'>Path</a> </td><td>Path of the file containing the server's private key. This file contains the PEM encoded private key file for the server. Set to null if the private key is combined with  the certificate file. If the private key is encrypted, you will be prompted at the console to enter the  pass-phrase to decript the private key on system reboot. There is a delima here. If you use a crypted  private key, the server will pause until you enter the pass-phrase which makes headless operation impossible.  If you do not encrypt the private key, your private key is more vulnerable should the server be compromised.  Which option you choose depends on whether headless operation is essential or not.</td></tr><tr class='param'><td class='param'>certFile: <a href='Path.html'>Path</a> </td><td>Path of the file containing the SSL certificate The certificate file contains the PEM encoded X.509 certificate for the server. The file may also contain  the private key in which case you should set the key parameter to null. The path may be an absolute path or it may be relative to the ServerRoot.</td></tr><tr class='param'><td class='param'>protocols: <a href='Array.html'>Array</a> </td><td>Optional arary of SSL protocols to support. Select from: SSLv2, SSLv3, TLSv1, ALL.  Each protocol can be prefixed by "+" or "-" to add or subtract from the prior set. For example: ["ALL", "-SSLv2"], or ["SSLv3", "TLSv1"] or "[ALL]". [default: null]</td></tr><tr class='param'><td class='param'>ciphers: <a href='Array.html'>Array</a> </td><td>Optional array of ciphers to use when negotiating the SSL connection. Not yet supported. [default: null]</td></tr></table></dd>
</dl><dl><dt>Throws</dt><dd>
<a href='ArgError.html'>ArgError</a>: for invalid arguments
</dd>
</dl></div>
</div>
<hr />
<a name='serve'></a>
<div class='api'>
<div class='apiSig'>    serve(request: <a href='ejs.web-Request.html'>Request</a>, router: <a href='ejs.web-Router.html'>Router</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Serve a web request. Convenience function to route, load and start a web application. 
Called by web application start script.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>request: <a href='ejs.web-Request.html'>Request</a> </td><td>Request object.</td></tr><tr class='param'><td class='param'>router: <a href='ejs.web-Router.html'>Router</a> </td><td>Configured router instance. If omitted, a default Router will be created using the Router.Top routing table. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setLimits'></a>
<div class='api'>
<div class='apiSig'>    setLimits(limits: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Update the server resource limits. The supplied limit fields are updated.
See the <a href='#limits'>limits</a> property for limit field details.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>limits: <a href='Object.html'>Object</a> </td><td>Object hash of limit fields and values.</td></tr></table></dd>
</dl><dl><dt>See Also</dt>
<dd>
<a href='limits.html'>limits</a>
</dd></dl>
</div>
</div>
<hr />
<a name='setPipeline'></a>
<div class='api'>
<div class='apiSig'>    setPipeline(incoming: <a href='Array.html'>Array</a>, outgoing: <a href='Array.html'>Array</a>, connector: <a href='String.html'>String</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Define the stages of the Http processing pipeline. Data flows through the processing pipeline and is
filtered or transmuted by filter stages. A communications connector is responsible for transmitting to 
the network.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>incoming: <a href='Array.html'>Array</a> </td><td>Array of stages for the incoming pipeline: default: ["chunk", "range", "upload"].</td></tr><tr class='param'><td class='param'>outgoing: <a href='Array.html'>Array</a> </td><td>Array of stages for the outgoing pipeline: default: ["auth", "range", "chunk"].</td></tr><tr class='param'><td class='param'>connector: <a href='String.html'>String</a> </td><td>Network connector to use for I/O. Defaults to the network connector "net". Other values: "send". The "net" connector transparently upgrades to the "send" connector if transmitting static data and  not using SSL, ranged or chunked transfers. `.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setWorkerImage'></a>
<div class='api'>
<div class='apiSig'>    setWorkerImage(worker: <a href='Worker.html'>Worker</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Define a worker that will serve as the base for cloning workers to serve web requests. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>worker: <a href='Worker.html'>Worker</a> </td><td>Configured worker.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='trace'></a>
<div class='api'>
<div class='apiSig'>    trace(options: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Configure request tracing for the server. The default is to trace the first line of requests and responses at
level 2 and to trace headers at level 3. The options argument contains optional properties.
These contain an object hash which describes  the following fields:.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Set of trace options with properties for: The connection property specifies that new connections should be traced. The error property specifies that new connections should be traced. The info property specifies that new connections should be traced. The rxFirst property specifies that the first line of the request should be traced. The rxHeaders property specifies that the headers (including first line) of the request should be traced. The rxBody property specifies that the body content of the request should be traced. The txFirst property specifies that the first line of the response should be traced. The txHeaders property specifies that the headers (including first line) of the response should be traced. The txBody property specifies that the body content of the request should be traced. The complete property specifies that the body content of the request should be traced. The size property specifies a maximum body size in bytes that will be traced. Content beyond this limit will not be traced.</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>trace({
    "rxHeaders": 3, "rxBody": 4, size: 1000000 }
})</pre></dd></dl>
</div>
</div>
<hr />
<a name='verifyClients'></a>
<div class='api'>
<div class='apiSig'>    verifyClients(caCertPath: <a href='Path.html'>Path</a>, caCertFile: <a href='Path.html'>Path</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Verify client certificates. This ensures that the clients must provide a client certificate for to verify 
the their identity. You can choose to use either the caCertPath or caCertFile argument. If both are provided
caCertPath takes precedence.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>caCertPath: <a href='Path.html'>Path</a> </td><td>Defines the directory containing the certificates to use for client authentication. The path may be an absolute path or it may be relative to the ServerRoot. Set to null if you are using <a href='#caCertFile'>caCertFile</a>. </td></tr><tr class='param'><td class='param'>caCertFile: <a href='Path.html'>Path</a> </td><td>Defines the location of the certificate file or bundle to use for client authentication. Use this if you have a single certificate or a bundle of certificates. Set to null if you are using <a href='#caCertPath'>caCertPath</a>. </td></tr></table></dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="https://www.embedthis.com/">       Embedthis Software LLC, 2003-2014. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
