<!DOCTYPE html>
<html>
<head>
   <title>Class LocalCache</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>LocalCache</h1>
<div class='classBlock'>
<table class='classHead' title='LocalCache'>
   <tr><td><strong>Module</strong></td><td>ejs</td></tr>
   <tr><td><strong>Definition</strong></td><td> class LocalCache</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>LocalCache <img src='images/inherit.gif' alt='inherit'/> <a href='Object.html'>Object</a><tr><td><strong>Stability</strong></td><td>Prototype.</td></tr>
       </td></tr>
</table>

<p class='classBrief'>Fast, non-scalable, non-durable, in-memory key/value cache class.</p>

<p class='classDescription'>The cache is in-process and is not 
available to other processes on the same machine. Key/value data is not persisted. Use this cache if you require
the fastest, non-scalable key/value cache alternative. There is one cache per Application. All uses of the LocalCache
class connect to the one cache using one domain of keys.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' title='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='limits'></a>
   <tr><td nowrap align='center'> get </td><td>limits</td><td><a href='Object.html'>Object</a></td><td>Resource limits for the server and for initial resource limits for requests. </td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='ClassMethods'></a>
<h2 class='classSection'>LocalCache Class Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <p>(No own class methods defined)</p></table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<a name='InstanceMethods'></a>
<h2 class='classSection'>LocalCache Instance Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#LocalCache'><b>LocalCache</b></a>(options: <a href='Object.html'>Object</a> = null)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Create and connect to the local cache.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#destroy'><b>destroy</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Destroy the cache.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#expire'><b>expire</b></a>(key: <a href='String.html'>String</a>, expires: <a href='Date.html'>Date</a>): <a href='Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Set a fixed expire date for a key.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#inc'><b>inc</b></a>(key: <a href='String.html'>String</a>, amount: <a href='Number.html'>Number</a> = 1): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Increment a key's value by a given amount.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#read'><b>read</b></a>(key: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = null): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a key.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#remove'><b>remove</b></a>(key: <a href='String.html'>String</a>): <a href='Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove the key and associated value from the cache.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#setLimits'><b>setLimits</b></a>(limits: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Update the cache cache resource limits.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#write'><b>write</b></a>(key: <a href='String.html'>String</a>, value: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = null): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write the key and associated value to the cache.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='LocalCache'></a>
<div class='api'>
<div class='apiSig'>    LocalCache(options: <a href='Object.html'>Object</a> = null)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Create and connect to the local cache. An application has only one cache regardless of how many LocalCache
instances are created. All LocalCache instances connect to the same underlying cache. Multiple interpreters
can use the local cache to reliably share information.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Configuration options. [default: null]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>shared</td><td>Create or connect to a single, shared cache. If multiple interpreters in a single process create shared LocalCache instances they will be able to share key/value data.</td></tr>
<td class='param'>lifespan</td><td>Default lifespan for key values in seconds. Set to zero for a default unlimited timeout.</td></tr>
<td class='param'>resolution</td><td>Time in milliseconds to check for expired expired keys.</td></tr>
<td class='param'>memory</td><td>Maximum memory to use for keys and data.</td></tr>
<td class='param'>trace</td><td>Trace I/O operations for debug.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='destroy'></a>
<div class='api'>
<div class='apiSig'>    destroy(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Destroy the cache. </dd></dl>
</div>
</div>
<hr />
<a name='expire'></a>
<div class='api'>
<div class='apiSig'>    expire(key: <a href='String.html'>String</a>, expires: <a href='Date.html'>Date</a>): <a href='Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Set a fixed expire date for a key. After defining an expiry, the key's lifespan will not be renewed via
access to the key.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>Key to modify.</td></tr><tr class='param'><td class='param'>expires: <a href='Date.html'>Date</a> </td><td>Date at which to expire the data. Set expires to null to cause the key to never expire.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>True if the key's expiry can be updated.</dd></dl>
</div>
</div>
<hr />
<a name='inc'></a>
<div class='api'>
<div class='apiSig'>    inc(key: <a href='String.html'>String</a>, amount: <a href='Number.html'>Number</a> = 1): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Increment a key's value by a given amount. This operation is atomic.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>Key value to read.</td></tr><tr class='param'><td class='param'>amount: <a href='Number.html'>Number</a> </td><td>Amount by which to increment the value. This amount can be negative to achieve a decrement. [default: 1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The new key value.</dd></dl>
</div>
</div>
<hr />
<a name='read'></a>
<div class='api'>
<div class='apiSig'>    read(key: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = null): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Read a key. Read will return the keys value or null if the key is not present or expired. If options.version
is set to true, then the call will return an object with "data" and "version" properties where version is
the key's unique update version ID. Each time the key is updated, the version ID is automatically changed to
a new value. Versions IDs can be used used for conditional (CAS) writes.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>Key value to read.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Read options. [default: null]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>version</td><td>If set to true, the read will return an object hash containing the data and a unique version  identifier for the last update to this key. This version identifier can be specified to write to peform an atomic CAS (check and swap) operation.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>Null if the key is not present. Otherwise return key data as a string or if the options parameter  specified "version == true", return an object with the properties "data" for the key data and  "version" for the CAS version identifier.</dd></dl>
</div>
</div>
<hr />
<a name='remove'></a>
<div class='api'>
<div class='apiSig'>    remove(key: <a href='String.html'>String</a>): <a href='Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Remove the key and associated value from the cache. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>Key value to remove. If key is null, then all keys are removed.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>True if the key was removed.</dd></dl>
</div>
</div>
<hr />
<a name='setLimits'></a>
<div class='api'>
<div class='apiSig'>    setLimits(limits: <a href='Object.html'>Object</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Update the cache cache resource limits. The supplied limit fields are updated.
See the <a href='#limits'>limits</a> property for limit field details.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>limits: <a href='Object.html'>Object</a> </td><td>Object hash of limit fields and values.</td></tr></table></dd>
</dl><dl><dt>See Also</dt>
<dd>
<a href='limits.html'>limits</a>
</dd></dl>
</div>
</div>
<hr />
<a name='write'></a>
<div class='api'>
<div class='apiSig'>    write(key: <a href='String.html'>String</a>, value: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = null): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Write the key and associated value to the cache. The value is written according to the optional mode option.  
The key's expiry will be updated based on the defined lifespan from the current time.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>Key to modify.</td></tr><tr class='param'><td class='param'>value: <a href='String.html'>String</a> </td><td>String value to associate with the key.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Options values. [default: null]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>expires</td><td>When to expire the key. Takes precedence over lifetime.</td></tr>
<td class='param'>lifespan</td><td>Preservation time for the key in seconds. If zero, the key will never expire.</td></tr>
<td class='param'>mode</td><td>Mode of writing: "set" is the default and means set a new value and create if required. "add" means set the value only if the key does not already exist. "append" means append to any existing value and create if required. "prepend" means prepend to any existing value and create if required. NOTE: only "set" is implemented.</td></tr>
<td class='param'>throw</td><td>Throw an exception rather than returning null if the version id has been updated for the key.</td></tr>
<td class='param'>version</td><td>Required key version for the write to succeed. A version can be obtained via the <a href='#read'>read</a>  call. If set to true, the read will return an object hash containing the data and a unique version  identifier for the last update to this key. This version identifier can be specified to write to peform an atomic CAS (check and swap) operation.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>The number of bytes written, returns null if the write failed due to an updated version identifier for the key.</dd></dl>
</div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="https://www.embedthis.com/">       Embedthis Software LLC, 2003-2014. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
