<!DOCTYPE html>
<html>
<head>
   <title>Class File</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>File</h1>
<div class='classBlock'>
<table class='classHead' title='File'>
   <tr><td><strong>Module</strong></td><td>ejs</td></tr>
   <tr><td><strong>Definition</strong></td><td>final  class File</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>File <img src='images/inherit.gif' alt='inherit'/> <a href='Object.html'>Object</a><tr><td><strong>Specified</strong></td><td>ejscript-2.5</td></tr>
<tr><td><strong>Stability</strong></td><td>Evolving.</td></tr>
       </td></tr>
</table>

<p class='classBrief'>The File class provides a foundation of I/O services to interact with physical files.</p>

<p class='classDescription'>Each File object represents a single file, a named path to data stored in non-volatile memory. A File object 
provides methods for creating, opening, reading, writing and deleting a file, and for accessing and modifying 
information about the file. All I/O is unbuffered and synchronous.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' title='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='canRead'></a>
   <tr><td nowrap align='center'> get </td><td>canRead</td><td><a href='Boolean.html'>Boolean</a></td><td>Is the file opened for reading
0. </td></tr>
<a name='canWrite'></a>
   <tr><td nowrap align='center'> get </td><td>canWrite</td><td><a href='Boolean.html'>Boolean</a></td><td>Is the file opened for writing
0. </td></tr>
<a name='encoding'></a>
   <tr><td nowrap align='center'> get set </td><td>encoding</td><td><a href='String.html'>String</a></td><td>Current encoding schem for serializing strings. Defaults to "utf-8".</td></tr>
<a name='isOpen'></a>
   <tr><td nowrap align='center'> get </td><td>isOpen</td><td><a href='Boolean.html'>Boolean</a></td><td>Is the file open. </td></tr>
<a name='options'></a>
   <tr><td nowrap align='center'> get </td><td>options</td><td><a href='Object.html'>Object</a></td><td>Current file options set when opening the file. </td></tr>
<a name='path'></a>
   <tr><td nowrap align='center'> get </td><td>path</td><td><a href='Path.html'>Path</a></td><td>The name of the file associated with this File object or null if there is no associated file. </td></tr>
<a name='position'></a>
   <tr><td nowrap align='center'> get set </td><td>position</td><td><a href='Number.html'>Number</a></td><td>The current read/write I/O position in the file. </td></tr>
<a name='size'></a>
   <tr><td nowrap align='center'> get </td><td>size</td><td><a href='Number.html'>Number</a></td><td>The size of the file in bytes. 0.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='ClassMethods'></a>
<h2 class='classSection'>File Class Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <p>(No own class methods defined)</p></table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<a name='InstanceMethods'></a>
<h2 class='classSection'>File Instance Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#File'><b>File</b></a>(path: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = null)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a File object and open the requested path.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#close'><b>close</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Close the input stream and free up all associated resources.</td></tr>
   <tr class='apiDef'><td class='apiType'>iterator override </td><td><a href='#get'><b>get</b></a>(): <a href='iterator-Iterator.html'>Iterator</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Iterate over the positions in a file.</td></tr>
   <tr class='apiDef'><td class='apiType'>iterator override </td><td><a href='#getValues'><b>getValues</b></a>(): <a href='iterator-Iterator.html'>Iterator</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get an iterator for this file to be used by "for each (v in obj)".</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#open'><b>open</b></a>(options: <a href='Object.html'>Object</a> = null): <a href='File.html'>File</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Open a file.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#read'><b>read</b></a>(buffer: <a href='ByteArray.html'>ByteArray</a>, offset: <a href='Number.html'>Number</a> = 0, count: <a href='Number.html'>Number</a> = -1): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a block of data from a file into a byte array.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#readBytes'><b>readBytes</b></a>(count: <a href='Number.html'>Number</a> = -1): <a href='ByteArray.html'>ByteArray</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read data bytes from a file and return a byte array containing the data.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#readString'><b>readString</b></a>(count: <a href='Number.html'>Number</a> = -1): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read data from a file as a string.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#remove'><b>remove</b></a>(): <a href='Boolean.html'>Boolean</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove a file.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#truncate'><b>truncate</b></a>(value: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Truncate the file.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#write'><b>write</b></a>(items: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write data to the file.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='File'></a>
<div class='api'>
<div class='apiSig'>    File(path: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = null)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Create a File object and open the requested path. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>path: <a href='Object.html'>Object</a> </td><td>The name of the file to associate with this file object. Can be either a String or a Path.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>If the open options are provided, the file is opened. See <a href='#open'>open</a> for the available options. [default: null]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='close'></a>
<div class='api'>
<div class='apiSig'>    close(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Close the input stream and free up all associated resources. </dd></dl>
</div>
</div>
<hr />
<a name='get'></a>
<div class='api'>
<div class='apiSig'>override   iterator  get(): <a href='iterator-Iterator.html'>Iterator</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Iterate over the positions in a file. This will get an iterator for this file to be used by 
"for (v in files)".</dd></dl>
<dl><dt>Returns</dt>
<dd>An iterator object that will return numeric offset positions in the file.</dd></dl>
</div>
</div>
<hr />
<a name='getValues'></a>
<div class='api'>
<div class='apiSig'>override   iterator  getValues(): <a href='iterator-Iterator.html'>Iterator</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Get an iterator for this file to be used by "for each (v in obj)". Return each byte of the file in turn.</dd></dl>
<dl><dt>Returns</dt>
<dd>An iterator object that will return the bytes of the file.</dd></dl>
</div>
</div>
<hr />
<a name='open'></a>
<div class='api'>
<div class='apiSig'>    open(options: <a href='Object.html'>Object</a> = null): <a href='File.html'>File</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Open a file. This opens the file designated when the File constructor was called.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional options. If ommitted, the options default to open the file in read mode. Options can be either a mode string or can be an options hash. [default: null]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>mode</td><td>Optional file access mode string. Use "r" for read, "w" for write, "a" for append to existing content, "c" to create the file if it does not exist, "l" to gain an exclusive lock, "s" for a shared lock, "t" for text mode, and "+" to never truncate. Defaults to "r". NOTE: not all platforms support "l" and "s". If "w" is specified and the file does not exist, it will be created. If "+" is not specified, the file will be truncated when opened, unless "a" is specified to append to existing content. If "c" is specified and the file exists, the open will fail. Use: "wa+" to append to a file and create if it does not exist.</td></tr>
<td class='param'>permissions</td><td>Number containing the Posix permissions number value. Note: this is a number and not a string representation of an octal posix number.</td></tr>
<td class='param'>owner</td><td>String representing the file owner (Not implemented).</td></tr>
<td class='param'>group</td><td>String representing the file group (Not implemented).</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>The File object. This permits method chaining.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if the path or file cannot be created.
</dd>
</dl></div>
</div>
<hr />
<a name='read'></a>
<div class='api'>
<div class='apiSig'>    read(buffer: <a href='ByteArray.html'>ByteArray</a>, offset: <a href='Number.html'>Number</a> = 0, count: <a href='Number.html'>Number</a> = -1): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Read a block of data from a file into a byte array. This will advance the read file's position.
This will read up to <a href='#count'>count</a> bytes that will fit into the provided buffer.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>buffer: <a href='ByteArray.html'>ByteArray</a> </td><td>Destination byte array for the read data.</td></tr><tr class='param'><td class='param'>offset: <a href='Number.html'>Number</a> </td><td>Offset in the byte array to place the data. If the offset is -1, then data is appended to the buffer write <a href='#position'>position</a> which is then updated. [default: 0]</td></tr><tr class='param'><td class='param'>count: <a href='Number.html'>Number</a> </td><td>Number of bytes to read. If -1, read much as the buffer will hold up to the entire file if the  buffer is of sufficient size or is growable. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A count of the bytes actually read. Returns null on end of file.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if the file could not be read.
</dd>
</dl></div>
</div>
<hr />
<a name='readBytes'></a>
<div class='api'>
<div class='apiSig'>    readBytes(count: <a href='Number.html'>Number</a> = -1): <a href='ByteArray.html'>ByteArray</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Read data bytes from a file and return a byte array containing the data. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>count: <a href='Number.html'>Number</a> </td><td>Number of bytes to read. If -1, read the entire file. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A byte array containing the read data. Returns an empty array on end of file.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if the file could not be read.
</dd>
</dl></div>
</div>
<hr />
<a name='readString'></a>
<div class='api'>
<div class='apiSig'>    readString(count: <a href='Number.html'>Number</a> = -1): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Read data from a file as a string. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>count: <a href='Number.html'>Number</a> </td><td>Number of bytes to read. If -1, read the entire file. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A string containing the read data. Returns an empty string on end of file.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if the file could not be read.
</dd>
</dl></div>
</div>
<hr />
<a name='remove'></a>
<div class='api'>
<div class='apiSig'>    remove(): <a href='Boolean.html'>Boolean</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Remove a file. </dd></dl>
<dl><dt>Returns</dt>
<dd>True if the file could be removed.</dd></dl>
</div>
</div>
<hr />
<a name='truncate'></a>
<div class='api'>
<div class='apiSig'>    truncate(value: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Truncate the file. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>value: <a href='Number.html'>Number</a> </td><td>The new length of the file.</td></tr></table></dd>
</dl><dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if the file's size cannot be changed
</dd>
</dl></div>
</div>
<hr />
<a name='write'></a>
<div class='api'>
<div class='apiSig'>    write(items: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Write data to the file. All I/O is unbuffered and synchronous.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>items: <a href='Array.html'>Array</a> </td><td>The data argument can be ByteArrays, strings or Numbers. All other types will call serialize first before writing. Note that numbers will not be written in a cross platform manner. If that is required, use the BinaryStream class to control the byte ordering when writing numbers.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The number of bytes written.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if the file could not be written.
</dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="https://www.embedthis.com/">       Embedthis Software LLC, 2003-2014. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
