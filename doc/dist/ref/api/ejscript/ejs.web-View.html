<!DOCTYPE html>
<html>
<head>
   <title>Class View</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>View</h1>
<div class='classBlock'>
<table class='classHead' title='View'>
   <tr><td><strong>Module</strong></td><td>ejs.web</td></tr>
   <tr><td><strong>Definition</strong></td><td>dynamic  class View</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>View <img src='images/inherit.gif' alt='inherit'/> <a href='Object.html'>Object</a><tr><td><strong>Specified</strong></td><td>ejscript-2.7</td></tr>
<tr><td><strong>Stability</strong></td><td>Prototype.</td></tr>
       </td></tr>
</table>

<p class='classBrief'>Base class for web framework Views.</p>

<p class='classDescription'>This class provides the core functionality for templated Ejscript view 
web pages. Ejscript web pages are compiled to create a new View class which extends the View base class.  
This class provides a suite of high-level control methods that generate HTML for input, output and 
presentation needs.  In addition to the properties defined by this class, user view classes will typically 
inherit at runtime, all public properites of any associated controller object defined in 
<a href='ejs.web-Request.html#controller.
'>Request.controller.
</a> 
<h4>Control Methods</h4>
Control methods are grouped into two families: input form controls and general output controls. Input controls
are typically located inside a form/endform control pair that defines a current data record from which data
will be presented. Output controls can be used anywhere on a page.<br/><br/>Input controls are generally of the form: function(field, options) where field is the name of the property
in the current record that contains the data to display. The options is an object hash that controls and modifies
how the control will render. The options hash can also be a plain string, in which case it is interpreted as an 
object hash with a single "action" property set to the value of the options string. i.e. {action: options}. Note
that controls will modify the options object and so sharing one option set over many controls is not advisable.<br/><br/>Various controls have custom options, but most share the following common set of option properties.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' title='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='config'></a>
   <tr><td nowrap align='center'> </td><td>config</td><td><a href='Object.html'>Object</a></td><td>null </td></tr>
<a name='controller'></a>
   <tr><td nowrap align='center'> </td><td>controller</td><td>&nbsp;</td><td>Optional controller object. </td></tr>
<a name='formats'></a>
   <tr><td nowrap align='center'> </td><td>formats</td><td><a href='Object.html'>Object</a></td><td>null </td></tr>
<a name='formatters'></a>
   <tr><td nowrap align='center'></td><td>formatters</td><td>&nbsp;</td><td>null </td></tr>
<a name='params'></a>
   <tr><td nowrap align='center'> </td><td>params</td><td><a href='Object.html'>Object</a></td><td>Form and query parameters - reference to the Request.params object. </td></tr>
<a name='request'></a>
   <tr><td nowrap align='center'> </td><td>request</td><td><a href='Object.html'>Object</a></td><td>Current request object. </td></tr>
<a name='session'></a>
   <tr><td nowrap align='center'>get </td><td>session</td><td><a href='ejs.web-Session.html'>Session</a></td><td>Session state object. The session state object can be used to share state between requests.
If a session has not already been created, accessing this property automatically creates a new session 
and sets the <a href='ejs.web-Request.html#sessionID'>Request.sessionID</a> property and a cookie containing a session ID sent to the client 
with the response.
To test if a session has been created, test the sessionID property which will not auto-create a session.
Objects are stored in the session state using JSON serialization.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='ClassMethods'></a>
<h2 class='classSection'>View Class Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <p>(No own class methods defined)</p></table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<a name='InstanceMethods'></a>
<h2 class='classSection'>View Instance Methods</h2>
<table class='apiIndex' title='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#View'><b>View</b></a>(request: <a href='Object.html'>Object</a>)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Constructor method to initialize a new View.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#alert'><b>alert</b></a>(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit a status alert area
TODO - review?.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#anchor'><b>anchor</b></a>(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit an anchor.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#button'><b>button</b></a>(name: <a href='String.html'>String</a>, label: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a form button.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#buttonLink'><b>buttonLink</b></a>(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a link button.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#chart'><b>chart</b></a>(data: <a href='Array.html'>Array</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a chart.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#checkbox'><b>checkbox</b></a>(name: <a href='String.html'>String</a>, checkedValue: <a href='Object.html'>Object</a> = true, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render an input checkbox.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#currency'><b>currency</b></a>(fmt: <a href='String.html'>String</a>): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Temporary helper function to format a number as currency.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#date'><b>date</b></a>(fmt: <a href='String.html'>String</a>): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Temporary helper function to format the date.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#div'><b>div</b></a>(body: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a HTML division.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#endform'><b>endform</b></a>(): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>End an input form.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#flash'><b>flash</b></a>(kinds: <a href='Object.html'>Object</a> = null, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit a flash message area.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#form'><b>form</b></a>(record: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a form.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#formatValue'><b>formatValue</b></a>(value: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a>): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get the data value for presentation.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#icon'><b>icon</b></a>(src: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit an icon link.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#image'><b>image</b></a>(src: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render an image.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#input'><b>input</b></a>(name: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render an input field as part of a form.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#label'><b>label</b></a>(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a text label field.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#link'><b>link</b></a>(target: <a href='Object.html'>Object</a>): <a href='Uri.html'>Uri</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a URI link.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#list'><b>list</b></a>(name: <a href='String.html'>String</a>, choices: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit a selection list.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#mail'><b>mail</b></a>(name: <a href='String.html'>String</a>, address: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit a mail link.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#number'><b>number</b></a>(fmt: <a href='String.html'>String</a>): <a href='String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Temporary helper function to format a number.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#progress'><b>progress</b></a>(percent: <a href='Number.html'>Number</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit a progress bar.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#radio'><b>radio</b></a>(name: <a href='String.html'>String</a>, choices: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a radio button.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#redirect'><b>redirect</b></a>(target: <a href='Object.html'>Object</a>, status: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Redirect the client to a new URL.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#render'><b>render</b></a>(renderer: <a href='Function.html'>Function</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Process and emit a view to the client.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#script'><b>script</b></a>(target: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit a script link.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#securityToken'><b>securityToken</b></a>(options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Generate a security token for the page and emit a &lt;meta HTML element for the security token.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#setHeader'><b>setHeader</b></a>(key: <a href='String.html'>String</a>, value: <a href='String.html'>String</a>, overwrite: <a href='Boolean.html'>Boolean</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to set a Http response header in <a href='#responseHeaders'>responseHeaders</a>.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#setHeaders'><b>setHeaders</b></a>(headers: <a href='Object.html'>Object</a>, overwrite: <a href='Boolean.html'>Boolean</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to set multiple Http response headers in <a href='#responseHeaders'>responseHeaders</a>.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#setStatus'><b>setStatus</b></a>(status: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience routine to set the (proposed) Http response status code.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#stylesheet'><b>stylesheet</b></a>(target: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Emit a style sheet link.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#table'><b>table</b></a>(data, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a table.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#tabs'><b>tabs</b></a>(data: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a tab control.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#text'><b>text</b></a>(name: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a text input field as part of a form.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#tree'><b>tree</b></a>(data: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a tree control.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#view'><b>view</b></a>(viewPath, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Render a partial view.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#write'><b>write</b></a>(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write data to the stream.Write data to the client.</td></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#writeSafe'><b>writeSafe</b></a>(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write safely.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='View'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  View(request: <a href='Object.html'>Object</a>)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Constructor method to initialize a new View. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>request: <a href='Object.html'>Object</a> </td><td>Request object.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='alert'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  alert(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit a status alert area
TODO - review?. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>text: <a href='String.html'>String</a> </td><td>Initial message text to display. Status messages may be updated by calling the  Controller.status function.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>period</td><td>Polling period in milliseconds for the client to check the server for status message  updates. If this is not specifed, the connection to the server will be kept open. This permits the  server to "push" alerts to the console, but will consume a connection at the server for each client.</td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% alert("Status Message", { refresh: "/getData", period: 2000" }) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='anchor'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  anchor(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit an anchor. This is a label inside an anchor reference.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>text: <a href='String.html'>String</a> </td><td>Link text to display.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='button'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  button(name: <a href='String.html'>String</a>, label: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a form button. This creates a button suitable for use inside an input form. When the button is clicked,
the input form will be submitted.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Name for the input button. This defines the HTML element name and provides the source of the initial value to display.</td></tr><tr class='param'><td class='param'>label: <a href='String.html'>String</a> </td><td>Text label to display in the button and value to send when the form is submitted.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. Examples: button("commit", "OK") button("commit", "Cancel") X. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='buttonLink'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  buttonLink(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a link button. This creates a button suitable for use outside an input form. When the button 
is clicked, the associated URI will be invoked.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>text: <a href='String.html'>String</a> </td><td>Text to display in the button. The text can contain embedded HTML.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Options specifying the target URI to invoke. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>buttonLink("Cancel", "\@")</pre></dd></dl>
</div>
</div>
<hr />
<a name='chart'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  chart(data: <a href='Array.html'>Array</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a chart. The chart control can display static or dynamic tabular data. The client chart control manages
sorting by column, dynamic data refreshes, pagination and clicking on rows.
TODO -- update.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data: <a href='Array.html'>Array</a> </td><td>Optional initial data for the control. The data option may be used with the refresh option to  dynamically refresh the data.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Object Optional extra options. See also <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>columns</td><td>Object hash of column entries. Each column entry is in-turn an object hash of options. If unset,  all columns are displayed using defaults.</td></tr>
<td class='param'>kind</td><td>String Type of chart. Select from: piechart, table, linechart, annotatedtimeline, guage, map,  motionchart, areachart, intensitymap, imageareachart, barchart, imagebarchart, bioheatmap, columnchart,  linechart, imagelinechart, imagepiechart, scatterchart (and more).</td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% chart(grid, { refresh: "/getData", period: 2000" }) %&gt;
&lt;% chart(data, { click: "\@update" }) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='checkbox'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  checkbox(name: <a href='String.html'>String</a>, checkedValue: <a href='Object.html'>Object</a> = true, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render an input checkbox. This creates a checkbox suitable for use within an input form.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Name for the input checkbox. This defines the HTML element name and provides the source of the initial value for the checkbox. The field should be a property of the <a href='#form'>form</a> control record. It can be a  simple property of the record or it can have multiple parts, such as: field.field.field. If this call  is used without a form control record, the actual data value should be supplied via the options.value  property.</td></tr><tr class='param'><td class='param'>checkedValue: <a href='Object.html'>Object</a> </td><td>Value for which the checkbox will be checked. Defaults to true. [default: true]</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='currency'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  currency(fmt: <a href='String.html'>String</a>): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Temporary helper function to format a number as currency. TODO.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>fmt: <a href='String.html'>String</a> </td><td>Format string.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A formatted string.</dd></dl>
</div>
</div>
<hr />
<a name='date'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  date(fmt: <a href='String.html'>String</a>): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Temporary helper function to format the date. TODO - should move to helpers somewhere.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>fmt: <a href='String.html'>String</a> </td><td>Format string.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A formatted string.</dd></dl>
</div>
</div>
<hr />
<a name='div'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  div(body: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a HTML division. This creates an HTML element with the required options. It is useful to generate
a dynamically refreshing division.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>body: <a href='String.html'>String</a> </td><td>Division body content.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% div({ refresh: "/getData", period: 2000}) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='endform'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  endform(): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>End an input form. This closes an input form initiated by calling the <a href='#form'>form</a> method.</dd></dl>
</div>
</div>
<hr />
<a name='flash'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  flash(kinds: <a href='Object.html'>Object</a> = null, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit a flash message area. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>kinds: <a href='Object.html'>Object</a> </td><td>Kinds of flash messages to display. May be a single string  ("error", "inform", "message", "warning"), an array of strings or null. If set to null (or omitted),  then all flash messages will be displayed. [default: null]</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>retain</td><td>Number. Number of seconds to retain the message. If <= 0, the message is retained until another message is displayed. Default is 0. TODO - this default implies it is displayed for zero seconds.</td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% flash("status") %&gt;
&lt;% flash() %&gt;
&lt;% flash(["error", "warning"]) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='form'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  form(record: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a form. The generated form HTML will include by default a security token definition to guard against CSRF threats.
This token will automatically be included when the form is submitted and will be validated by the 
receiving Controller. To disable this functionality, set options.nosecurity to true. This security token
will be generated once for the view and the same token will be used by all forms on the view page. To use
security tokens outside a form, you need to manually call <a href='#securityToken'>securityToken</a> in the &lt;head> section of the page.<br/><br/>TODO -- much more doc here
- Talk about controllers updating the record.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>record: <a href='Object.html'>Object</a> </td><td>Record to display and optionally update.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>hideErrors</td><td>Don't display model errors. Models retain error diagnostics from a failed write. Setting this option will prevent their display.</td></tr>
<td class='param'>modal</td><td>String Make a form a modal dialog.</td></tr>
<td class='param'>nosecurity</td><td>Don't generate a security token for the form.</td></tr>
<td class='param'>securityToken</td><td>String Override CSRF security token to include when the form is submitted. A default  security token will always be generated unless options.nosecurity is defined to be true.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='formatValue'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  formatValue(value: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a>): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Get the data value for presentation. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>value: <a href='Object.html'>Object</a> </td><td>Data to present.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Formatting options.</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>formatter</td><td>Optional data formatter. If undefined, defaults to a basic formatter based on the value's data type.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>The formatted data.</dd></dl>
</div>
</div>
<hr />
<a name='icon'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  icon(src: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit an icon link. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>src: <a href='Object.html'>Object</a> </td><td>Source name for the icon.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='image'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  image(src: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render an image. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>src: <a href='String.html'>String</a> </td><td>Source name for the image.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% image("pic.gif") %&gt;
&lt;% image("pic.gif", { refresh: "\@store/getData", period: 2000, style: "myStyle" }) %&gt;
&lt;% image("pic.gif", { click: "\@foreground/click" }) %&gt;
&lt;% image("checkout.gif", { click: "\@checkout" }) %&gt;
&lt;% image("pic.gif", { remote: "\@store/update" }) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='input'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  input(name: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render an input field as part of a form. This is a smart input control that will call the appropriate
input control based on the model field data type.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Name for the input field. This defines the HTML element name and provides the source  of the initial value to display. The field should be a property of the form control record. It can  be a simple property of the record or it can have multiple parts, such as: field.field.field. If  this call is used without a form control record, the actual data value should be supplied via the  options.value property.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% input("phone") %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='label'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  label(text: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a text label field. This renders an output-only text field. Use text() for input fields.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>text: <a href='String.html'>String</a> </td><td>Label text to display.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% label("Hello World") %&gt;
&lt;% label("Hello", { refresh: "/getData", period: 2000, style: "myStyle" }) %&gt;
&lt;% label("Hello", { click: "/foreground/link" }) %&gt;
&lt;% label("Checkout", { click: "\@checkout" }) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='link'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  link(target: <a href='Object.html'>Object</a>): <a href='Uri.html'>Uri</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Create a URI link. The target parameter may contain partial or complete URI information. The missing parts 
are supplied using the current request and route tables. The resulting URI is a normalized, server-local 
URI (begins with "/"). The URI will include any defined scriptName, but will not include scheme, host or 
port components.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>target: <a href='Object.html'>Object</a> </td><td>The URI target. The target parameter can be a URI string or object hash of components. If the  target is a string, it is may contain an absolute or relative URI. If the target has an absolute URI path,  that path is used unmodified. If the target is a relative URI, it is appended to the current request URI  path.  The target can also be an object hash of URI components: scheme, host, port, path, reference and query. If these component properties are supplied, these will be combined to create a URI.  The URI will be created according to the route URI template. The template may be explicitly specified via a "route" target property. Otherwise, if an "action" property is specified, the route of the same name will be used. If these don't result in a usable route, the "default" route will be used. See the Router for more details.  If the target is a string that begins with " @" it will be interpreted as a controller/action pair of the  form " @Controller/action". If the "controller/" portion is absent, the current controller is used. If  the action component is missing, the "index" action is used. A bare " @" refers to the "index" action  of the current controller.  Lastly, the target object hash may contain an override "uri" property. If specified, the value of the  "uri" property will be returned and all other properties will be ignored.</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>scheme</td><td>String URI scheme portion.</td></tr>
<td class='param'>host</td><td>String URI host portion.</td></tr>
<td class='param'>port</td><td>Number URI port number.</td></tr>
<td class='param'>path</td><td>String URI path portion.</td></tr>
<td class='param'>reference</td><td>String URI path reference. Does not include "#".</td></tr>
<td class='param'>query</td><td>String URI query parameters. Does not include "?".</td></tr>
<td class='param'>controller</td><td>String Controller name if using a Controller-based route. This can also be specified via the action option.</td></tr>
<td class='param'>action</td><td>String Action to invoke. This can be a URI string or a Controller action of the form.</td></tr>
<td class='param'>route</td><td>String Route name to use for the URI template.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>A normalized, server-local Uri object. The returned URI will be an absolute URI.</dd></dl>
<dl><dt>Example</dt>
<dd><pre>Given a current request of http://example.com/samples/demo" and "r" == the current request:

r.link("images/splash.png")                  # "/samples/images/splash.png"
r.link("images/splash.png").complete(r.uri)  # "http://example.com/samples/images/splash.png"
r.link("images/splash.png").relative(r.uri)  # "images/splash.png"

r.link("http://example.com/index.html")
r.link("/path/to/index.html")
r.link("\@Controller/checkout")
r.link("\@Controller/")
r.link("\@checkout")
r.link("\@")
r.link({action: "checkout")
r.link({action: "logout", controller: "Admin")
r.link({action: "Admin/logout")
r.link({action: "\@Admin/logout")
r.link({uri: "http://example.com/checkout"})
r.link({route: "default", action: "\@checkout")
r.link({product: "candy", quantity: "10", template: "/cart/{product}/{quantity}}")</pre></dd></dl>
</div>
</div>
<hr />
<a name='list'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  list(name: <a href='String.html'>String</a>, choices: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit a selection list. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Field name to provide the default value for the list. The field should be a property of the  form control record. The field can be a simple property of the record or it can have multiple parts,  i.e. field.field.field. The field name is used to create the HTML input control name. If this call is used without a form control record, the actual data value should be supplied via the  options.value property.</td></tr><tr class='param'><td class='param'>choices: <a href='Object.html'>Object</a> </td><td>Choices to select from. This can be an array list where each element is displayed and the value  returned is an element index (origin zero). It can also be an array of key/value array tuples where the  first entry is the value to display and the second is the value to send to the app. Or it can be an  array of objects such as those returned from a table lookup. Lastly, it can be an object where the property key is the value to display and the property value is the value to send to the app.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>list("stockId", Stock.stockList) 
list("priority", ["low", "med", "high"])
list("priority", [["low", 0], ["med", 0.5], ["high", 1]])
list("priority", [{low: 3}, {med: 5}, {high: 9}])
list("priority", {low: 0, med: 1, high: 2})
list("priority", [{id: 77, field: "value", ...}, ...])</pre></dd></dl>
</div>
</div>
<hr />
<a name='mail'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  mail(name: <a href='String.html'>String</a>, address: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit a mail link. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Recipient name to display.</td></tr><tr class='param'><td class='param'>address: <a href='String.html'>String</a> </td><td>Mail recipient address link.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='number'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  number(fmt: <a href='String.html'>String</a>): <a href='String.html'>String</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Temporary helper function to format a number. TODO.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>fmt: <a href='String.html'>String</a> </td><td>Format string.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A formatted string 0.</dd></dl>
</div>
</div>
<hr />
<a name='progress'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  progress(percent: <a href='Number.html'>Number</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit a progress bar. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>percent: <a href='Number.html'>Number</a> </td><td>Progress percentage (0-100).</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% progress(percent, { refresh: "/getData", period: 2000" }) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='radio'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  radio(name: <a href='String.html'>String</a>, choices: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a radio button. This creates a radio button suitable for use within an input form.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Name for the input radio button. This defines the HTML element name and provides the source  of the initial value to display. The field should be a property of the form control record. It can  be a simple property of the record or it can have multiple parts, such as: field.field.field. If  this call is used without a form control record, the actual data value should be supplied via the  options.value property.</td></tr><tr class='param'><td class='param'>choices: <a href='Object.html'>Object</a> </td><td>Choices to select from. This can be an array list where each element is displayed and the value  returned is an element index (origin zero). It can also be an array of key/value array tuples where the  first entry is the value to display and the second is the value to send to the app and store in the  database. Or it can be an array of objects such as those returned from a table lookup. Lastly, it can  be an object where the property key is the value to display and the property value is the value to  send to the app and store in the database.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>radio("priority", ["low", "med", "high"])
radio("priority", [["low", 0], ["med", 0.5], ["high", 1]])
radio("priority", [{low: 3}, {med: 5}, {high: 9}])
radio("priority", {low: 0, med: 1, high: 2})
radio("priority", Message.priorities)</pre></dd></dl>
</div>
</div>
<hr />
<a name='redirect'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  redirect(target: <a href='Object.html'>Object</a>, status: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Redirect the client to a new URL. This call redirects the client's browser to a new target specified 
by the url.  Optionally, a redirection code may be provided. Normally this code is set to be the HTTP 
code 302 which means a temporary redirect. A 301, permanent redirect code may be explicitly set.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>target: <a href='Object.html'>Object</a> </td><td>Uri to redirect the client toward. This can be a relative or absolute string URI or it can be a hash of URI components. For example, the following are valid inputs: ../index.ejs,  http://www.example.com/home.html,  @list.</td></tr><tr class='param'><td class='param'>status: <a href='Number.html'>Number</a> </td><td>Optional HTTP redirection status.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='render'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  render(renderer: <a href='Function.html'>Function</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Process and emit a view to the client. This invokes the given render function with "this" set to the view.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>renderer: <a href='Function.html'>Function</a> </td><td>Rendering function. This may be any external function. The function will have its scope modified so that it executes as if it were a member method of the View class.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='script'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  script(target: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit a script link. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>target: <a href='Object.html'>Object</a> </td><td>Script URI to load. URI or array of scripts. Call with no arguments or set to null to  get a default set of scripts.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>minified</td><td>If the target is null, a minified option will determine if compressed (minifed)  or uncompressed versions of the scripts will be used.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='securityToken'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  securityToken(options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Generate a security token for the page and emit a &lt;meta HTML element for the security token. Security tokens are used to help guard against CSRF threats.
This token will automatically be included whenever forms are submitted and the token be validated by the 
receiving Controller. Forms will normally automatically generate the security token and that explicitly
calling this routine is not required unless a security token is required for non-form requests such as AJAX
requests. The <a href='#securityToken'>securityToken</a> control should be called inside the &lt;head section of the view page.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;head>
    &lt;% securityToken() %&gt;
&lt;/head></pre></dd></dl>
</div>
</div>
<hr />
<a name='setHeader'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  setHeader(key: <a href='String.html'>String</a>, value: <a href='String.html'>String</a>, overwrite: <a href='Boolean.html'>Boolean</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to set a Http response header in <a href='#responseHeaders'>responseHeaders</a>. If a header has already been 
defined and <a href='#overwrite'>overwrite</a> is true, the header will be overwritten. NOTE: case is ignored in the header keyword.
Access <a href='#responseHeaders'>responseHeaders</a> to inspect the proposed response header set.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>key: <a href='String.html'>String</a> </td><td>The header keyword for the request, e.g. "accept".</td></tr><tr class='param'><td class='param'>value: <a href='String.html'>String</a> </td><td>The value to associate with the header, e.g. "yes".</td></tr><tr class='param'><td class='param'>overwrite: <a href='Boolean.html'>Boolean</a> </td><td>If the header is already defined and overwrite is true, then the new value will overwrite the old. If overwrite is false, the new value will be catenated to the old value with a ", " separator.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setHeaders'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  setHeaders(headers: <a href='Object.html'>Object</a>, overwrite: <a href='Boolean.html'>Boolean</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to set multiple Http response headers in <a href='#responseHeaders'>responseHeaders</a>. Access <a href='#responseHeaders'>responseHeaders</a> to 
inspect the proposed response header set.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>headers: <a href='Object.html'>Object</a> </td><td>Set of headers to use.</td></tr><tr class='param'><td class='param'>overwrite: <a href='Boolean.html'>Boolean</a> </td><td>If the header is already defined and overwrite is true, then the new value will overwrite the old. If overwrite is false, the new value will be catenated to the old value with a ", " separator.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='setStatus'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  setStatus(status: <a href='Number.html'>Number</a>): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Convenience routine to set the (proposed) Http response status code. This is equivalent to assigning 
to the <a href='#status'>status</a> property.</dd></dl>
</div>
</div>
<hr />
<a name='stylesheet'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  stylesheet(target: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Emit a style sheet link. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>target: <a href='Object.html'>Object</a> </td><td>Stylesheet URI or array of stylesheets. Call with no arguments or set to null to get a  default set of stylesheets.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='table'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  table(data, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a table. The table control can display static or dynamic tabular data. The client table control 
manages sorting by column, dynamic data refreshes and clicking on rows or cells.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data </td><td>Data to display. The data must be a grid of data, ie. an Array of objects where each object  represents the data for a row. The column names are the object property names and the cell text is  the object property values.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>cell</td><td>Boolean Set to true to make click or edit links apply per cell instead of per row.  The default is false.</td></tr>
<td class='param'>columns</td><td>(Array|Object) The columns list can be either an array of column names or an object hash  of column objects where each column entry is hash of column options.  Column options: align, formatter, header, sort, sortOrder, style, width.</td></tr>
<td class='param'>params</td><td>Object Hash of post parameters to include in the request. This is a hash of key/value items.</td></tr>
<td class='param'>pivot</td><td>Boolean Pivot the table by swaping rows for columns and vice-versa.</td></tr>
<td class='param'>showHeader</td><td>Boolean Control if column headings are displayed.</td></tr>
<td class='param'>showId</td><td>Boolean If a columns option is not provided, the id column is normally hidden.  To display, set showId to be true.</td></tr>
<td class='param'>sort</td><td>String Enable row sorting and define the column to sort by. Defaults to the first column.</td></tr>
<td class='param'>sortOrder</td><td>String Default sort order. Set to "ascending" or "descending".Defaults to ascending.</td></tr>
<td class='param'>style</td><td>String CSS class to use for the table. The ultimate style to use for a table cell is the  combination of style, styleCells, styleColumns and style Rows.</td></tr>
<td class='param'>styleCells</td><td>2D Array of styles to use for the table body cells. Can also provide an array to the  column.style property.</td></tr>
<td class='param'>styleColumns</td><td>Array of styles to use for the table body columns. Can also use the style option in the columns option.</td></tr>
<td class='param'>styleRows</td><td>Array of styles to use for the table body rows.</td></tr>
<td class='param'>title</td><td>String Table title. Column options: <ul> <li>align - Will right-align numbers by default</li> <li>click - URI to invoke if the cell is clicked</li> <li>edit - TODO </li> <li>formatter - Function to invoke to format the value to display</li> <li>header - Header text for the column</li> <li>style - Cell styles</li> <li>width - Column width. Can be a string percentage or numeric pixel width</li> </ul></td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% table(gridData, { refresh: "\@update", period: 1000, pivot: true" }) %&gt;
&lt;% table(gridData, { click: "\@edit" }) %&gt;
&lt;% table(Table.findAll()) %&gt;
&lt;% table(gridData, {
    click: "\@edit",
    sort: "Product",
    columns: {
        product:    { header: "Product", width: "20%" }
        date:       { format: date('%m-%d-%y) }
    }
 }) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='tabs'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  tabs(data: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a tab control. The tab control can manage a set of panes and will selectively show and hide or invoke the selected panes. 
If the click option is defined (default), the selected pane will be invoked via a foreground click. If the
remote option is defined, the selected pane will be invoked via a background click. If the toggle option is
defined the selected pane will be made visible and other panes will be hidden.
If using show/hide tabs, define the initial visible pane to be of the class "-ejs-pane-visible" and define
other panes to be "-ejs-pane-hidden". The control's client side code will toggle these classes to make panes
visible or hidden.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data: <a href='Object.html'>Object</a> </td><td>Tab data for the control. Tab data can be be a single object where the tab text is the property  key and the target to invoke is the property value. It can also be an an array of objects, one per tab.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>click</td><td>Set to true to invoke the selected pane via a foreground click.</td></tr>
<td class='param'>remote</td><td>Set to true to invoke the selected pane via a background click.</td></tr>
<td class='param'>toggle</td><td>Set to true to show the selected pane and hide other panes.</td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>tabs({Status: "pane-1", "Edit: "pane-2"})
tabs([{Status: "/url-1"}, {"Edit: "/url-2"}], { click: "\@someAction"})</pre></dd></dl>
</div>
</div>
<hr />
<a name='text'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  text(name: <a href='String.html'>String</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a text input field as part of a form. </dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>name: <a href='String.html'>String</a> </td><td>Name for the input text field. This defines the HTML element name and provides the source  of the initial value to display. The field should be a property of the form control record. It can  be a simple property of the record or it can have multiple parts, such as: field.field.field. If  this call is used without a form control record, the actual data value should be supplied via the  options.value property. If the cols or rows option is defined, then a textarea HTML element will be used for multiline input.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' title='options'>
<td class='param'>cols</td><td>Number number of text columns.</td></tr>
<td class='param'>rows</td><td>Number number of text rows.</td></tr>
<td class='param'>password</td><td>Boolean The data to display is a password and should be obfuscated.</td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% text("name") %&gt;
&lt;% text("product.name") %&gt;
&lt;% text("address", { escape: true }) %&gt;
&lt;% text("password", {value: params.password, password: true}) %&gt;
&lt;% text("password", {size: 20}) %&gt;</pre></dd></dl>
</div>
</div>
<hr />
<a name='tree'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  tree(data: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a tree control. The tree control can display static or dynamic tree data.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data: <a href='Object.html'>Object</a> </td><td>Optional initial data for the control. The data option may be used with the refresh option to  dynamically refresh the data. The tree data is typically an XML document.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='view'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  view(viewPath, options: <a href='Object.html'>Object</a> = expression): <a href='Void.html'>Void</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Render a partial view. This creates an HTML element with the required options. It is useful to generate
a dynamically refreshing division.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>viewPath </td><td>(String|Object) If a string, it is a view template name or the name of an action. If an object, it should have properties: controller and action. Action can be the name of a view template.</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Optional extra options. See <a href='#View'>View</a> for a list of the standard options. [default: expression]</td></tr></table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>&lt;% view(viewName) %&gt;
@</pre></dd></dl>
</div>
</div>
<hr />
<a name='write'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  write(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Write data to the stream.Write data to the client. If the stream can accept all the write data, the call returns immediately with the number of bytes written. 
If writing more data than the stream can absorb in sync mode, the call will block until the data is written.
If writing more data than the stream can absorb in async mode, the call will not block and will buffer the
data and return immediately. Some streams will require a <a href='#flush'>flush()</a> call to actually send the data.
A "writable" event will be issued when the stream can again absorb more data.This will buffer the written data until either flush() or finalize() is called. 
0</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data: <a href='Array.html'>Array</a> </td><td>Data to write.</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' title='events'>
<td class='param'>readable</td><td>Issued when data is written and a consumer can read without blocking.</td></tr>
<td class='param'>writable</td><td>Issued when the stream becomes empty and it is ready to be written to.</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>A count of the bytes actually written.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='IOError.html'>IOError</a>: if there is an I/O error.
</dd>
</dl></div>
</div>
<hr />
<a name='writeSafe'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  writeSafe(data: <a href='Array.html'>Array</a>): <a href='Number.html'>Number</a>
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Write safely. Write HTML escaped data back to the client.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' title='parameters'>
<tr class='param'><td class='param'>data: <a href='Array.html'>Array</a> </td><td>Objects to HTML encode and write back to the client. 0.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="https://www.embedthis.com/">       Embedthis Software LLC, 2003-2014. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
