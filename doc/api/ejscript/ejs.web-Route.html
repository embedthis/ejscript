<!DOCTYPE html>
<html>
<head>
   <title>Class Route</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>Route</h1>
<div class='classBlock'>
<table class='classHead' summary='Route'>
   <tr><td><strong>Module</strong></td><td>ejs.web</td></tr>
   <tr><td><strong>Definition</strong></td><td>dynamic  class Route</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>Route <img src='images/inherit.gif' alt='inherit'/> <a href='Object.html'>Object</a>       </td></tr>
</table>

<p class='classBrief'>A Route describes a mapping from a URI to a web application.</p>

<p class='classDescription'>A route has a URI template for matching with
candidate request URIs and a serving function to respond to the request.<br/><br/>If the URI template is a regular expression, it is used to match against the request pathInfo. If it matches,
the pathInfo is matched and sub-expressions may be referenced in the override parameters by using <a href='#1'>1</a> <a href='#2'>2</a> and
so on. e.g. { priority: "<a href='#1"'>1"</a> }<br/><br/>If the URL template is a function, it is run to test for a request match. It should return true to 
accept the request. The function can set parameters in request.params.<br/><br/>The optional override params hash provides parameters which will be defined in params[] overriding any tokenized 
parameters previously set.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' summary='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='limits'></a>
   <tr><td nowrap align='center'> </td><td>limits</td><td><a href='Object.html'>Object</a></td><td>Resource limits for the request. See HttpServer.limits for details.</td></tr>
<a name='location'></a>
   <tr><td nowrap align='center'> </td><td>location</td><td><a href='Object.html'>Object</a></td><td>Application location to serve the request. Location contains two properties: scriptName which is the string 
URI prefix for the application and dir which is a Path to the physical file system directory containing 
the applciation.</td></tr>
<a name='method'></a>
   <tr><td nowrap align='center'> </td><td>method</td><td><a href='String.html'>String</a></td><td>HTTP method to match. If set to "" or "*"", all methods are matched.</td></tr>
<a name='middleware'></a>
   <tr><td nowrap align='center'> </td><td>middleware</td><td><a href='Array.html'>Array</a></td><td>Middleware to run on requests for this route. Middleware wraps the application function filtering and 
modifying its inputs and outputs.</td></tr>
<a name='moduleName'></a>
   <tr><td nowrap align='center'> </td><td>moduleName</td><td><a href='String.html'>String</a></td><td>Name of a required module containing code to serve requests on this route. </td></tr>
<a name='name'></a>
   <tr><td nowrap align='center'> </td><td>name</td><td><a href='String.html'>String</a></td><td>Route name. This is local to the route set (controller).</td></tr>
<a name='params'></a>
   <tr><td nowrap align='center'> </td><td>params</td><td><a href='Object.html'>Object</a></td><td>Request parameters to add to the Request.params. This optional override hash provides parameters which will 
be defined in Request.params[].</td></tr>
<a name='redirect'></a>
   <tr><td nowrap align='center'> </td><td>redirect</td><td><a href='String.html'>String</a></td><td>URI to redirect the request toward. </td></tr>
<a name='response'></a>
   <tr><td nowrap align='center'> </td><td>response</td><td><a href='Object.html'>Object</a></td><td>Response object hash or function to serve the request. </td></tr>
<a name='rewrite'></a>
   <tr><td nowrap align='center'> </td><td>rewrite</td><td><a href='Function.html'>Function</a></td><td>Rewrite function to rewrite the request before serving. It may update the request scriptName, pathInfo 
and other Request properties. Return true to continue serving the request on this route. Otherwise re-route
after rewriting the request.</td></tr>
<a name='routeSetName'></a>
   <tr><td nowrap align='center'> </td><td>routeSetName</td><td><a href='String.html'>String</a></td><td>Route set owning the route. This is the first component of the template.</td></tr>
<a name='router'></a>
   <tr><td nowrap align='center'> </td><td>router</td><td><a href='ejs.web-Router.html'>Router</a></td><td>Router instance reference. </td></tr>
<a name='target'></a>
   <tr><td nowrap align='center'> </td><td>target</td><td><a href='String.html'>String</a></td><td>Target mapping for the route. The route maps from the template to the target.</td></tr>
<a name='template'></a>
   <tr><td nowrap align='center'> </td><td>template</td><td><a href='Object.html'>Object</a></td><td>Template pattern for creating links. The template is used to match the request pathInfo. The template can be a 
string, a regular expression or a function. If it is a string, it may contain tokens enclosed in braces 
"{}" and it is converted to a regular expression for fast matching. At run-time, request tokens 
are extracted and stored as items in the Request.params collection.<br/><br/>If the template is a regular expression, it is used to match against the request pathInfo. If it matches, 
then sub-expressions may be referenced in the <a href='#params'>params</a> values by using <a href='#1'>1</a> <a href='#2'>2</a> and so on. 
e.g. params: { priority: "<a href='#1"'>1"</a> }<br/><br/>If the template is a function, it is run to test for a request match. The function should return true to 
match the request. The function can directly set parameters in request.params.</td></tr>
<a name='tokens'></a>
   <tr><td nowrap align='center'> </td><td>tokens</td><td><a href='Array.html'>Array</a></td><td>Key tokens in the route template. </td></tr>
<a name='trace'></a>
   <tr><td nowrap align='center'> </td><td>trace</td><td><a href='Object.html'>Object</a></td><td>Trace options for the request. Note: the route is created after the Request object is created so the tracing 
of the connections and request headers will be controlled by the owning server. 
See HttpServer.trace for trace property fields.</td></tr>
<a name='workers'></a>
   <tr><td nowrap align='center'> </td><td>workers</td><td><a href='Boolean.html'>Boolean</a></td><td>If true, requests should execute using a worker thread if possible. The worker thread will be pooled when
the request completes and be available for use by subsequent requests.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='ClassMethods'></a>
<h2 class='classSection'>Route Class Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <p>(No own class methods defined)</p></table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<a name='InstanceMethods'></a>
<h2 class='classSection'>Route Instance Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'></td><td><a href='#Route'><b>Route</b></a>(template: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a>, router: <a href='ejs.web-Router.html'>Router</a>)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a new Route instance.</td></tr>
</table>

<p class='inheritedLink'><a href='Object.html#InstanceMethods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='Route'></a>
<div class='api'>
<div class='apiSig'>  ejs.web  Route(template: <a href='Object.html'>Object</a>, options: <a href='Object.html'>Object</a>, router: <a href='ejs.web-Router.html'>Router</a>)
</div>
<div class='apiDetail'>
<dl><dt>Description</dt></dd><dd>Create a new Route instance. This is normally not invoked directly. Rather Router.add() is used to
create and install routes into the Router.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>template: <a href='Object.html'>Object</a> </td><td>String or Regular Expression defining the form of a matching URI (Request.pathInfo).</td></tr><tr class='param'><td class='param'>options: <a href='Object.html'>Object</a> </td><td>Route options representing the URI and options to use when servicing the request. If it is a string, it may begin with an " @" and be of the form " @[controller/]action". In this case, if there is a "/" delimiter, the first portion is a controller and the second is the controller action to invoke. The controller or action may be absent. For example: " @Controller/", " @action", " @controller/action". If the string does not begin with an " @", it is interpreted as a literal URI.  For example: "/web/index.html". If the options is an object hash, it may contain the options below:.</td></tr><tr class='param'><td class='param'>router: <a href='ejs.web-Router.html'>Router</a> </td><td>Owning router object.</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' summary ='options'>
<td class='param'>action</td><td>Action method to service the request. This may be of the form "action", "controller/action" or  "controller/".  If the action portion omitted, the default action (index) will be used.</td></tr>
<td class='param'>controller</td><td>Controller to service the request.</td></tr>
<td class='param'>method</td><td>HTTP Method for which the route is valid. Set to "*"" for all methods.</td></tr>
<td class='param'>name</td><td>Name to give to the route. If absent, the name is created from the controller and action names.</td></tr>
<td class='param'>outer</td><td>Parent route. The parent's template and parameters are appended to this route.</td></tr>
<td class='param'>params</td><td>Override parameter to provide to the request in the Request.params.</td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>Route("/{controller}(/{action}(/{id}))/", { method: "POST" })
Route("/User/login", {name: "login" })</pre></dd></dl>
</div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="http://embedthis.com/">       Embedthis Software LLC, 2003-2013. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
